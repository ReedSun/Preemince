<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Preeminent</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="ReedSun">
<meta property="og:type" content="website">
<meta property="og:title" content="Preeminent">
<meta property="og:url" content="http://reedsun.top/page/5/index.html">
<meta property="og:site_name" content="Preeminent">
<meta property="og:description" content="ReedSun">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Preeminent">
<meta name="twitter:description" content="ReedSun">
  
    <link rel="alternate" href="/atom.xml" title="Preeminent" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Preeminent</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">I have on idea about subtitle yet</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Zoeken"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://reedsun.top"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-python/学习urblib和requests" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/05/24/python/学习urblib和requests/" class="article-date">
  <time datetime="2017-05-24T14:01:50.710Z" itemprop="datePublished">2017-05-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="学习urblib和requests"><a href="#学习urblib和requests" class="headerlink" title="学习urblib和requests"></a>学习urblib和requests</h1><ul>
<li><p>urblib是python的一个自建模块，它提供了一系列用于操作URL的功能。</p>
</li>
<li><p>而第三方模块requests是对urllib的人性化封装。</p>
</li>
</ul>
<p>##requests</p>
<ul>
<li><a href="http://cn.python-requests.org/zh_CN/latest/" target="_blank" rel="external">中文官方文档</a></li>
<li><a href="http://cn.python-requests.org/zh_CN/latest/user/quickstart.html" target="_blank" rel="external">快速上手</a></li>
</ul>
<p>##urllib</p>
<ul>
<li><p>urllib是基于http的高层库，它有以下三个主要功能：</p>
<ul>
<li>request处理客户端的请求</li>
<li>response处理服务端的响应</li>
<li>parse会解析url</li>
</ul>
</li>
<li><p>下面是使用Python3中urllib来获取资源的一些示例</p>
<ul>
<li><p>最简单的抓取url内容。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"> import urllib.request  </div><div class="line">response = urllib.request.urlopen(&apos;http://python.org/&apos;)  </div><div class="line">html = response.read()</div></pre></td></tr></table></figure>
</li>
<li><p>使用response处理服务器的相应。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"> import urllib.request  </div><div class="line">req = urllib.request.Request(&apos;http://python.org/&apos;)  </div><div class="line">response = urllib.request.urlopen(req)  </div><div class="line">the_page = response.read()</div></pre></td></tr></table></figure>
</li>
<li><p>发送数据</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"> import urllib.parse  </div><div class="line">import urllib.request  </div><div class="line">url = &apos;&quot;  </div><div class="line">values = &#123;  </div><div class="line">&apos;act&apos; : &apos;login&apos;,  </div><div class="line">&apos;login[email]&apos; : &apos;&apos;,  </div><div class="line">&apos;login[password]&apos; : &apos;&apos;  </div><div class="line">&#125;  </div><div class="line">data = urllib.parse.urlencode(values)  </div><div class="line">req = urllib.request.Request(url, data)  </div><div class="line">req.add_header(&apos;Referer&apos;, &apos;http://www.python.org/&apos;)  </div><div class="line">response = urllib.request.urlopen(req)  </div><div class="line">the_page = response.read()  </div><div class="line">print(the_page.decode(&quot;utf8&quot;))</div></pre></td></tr></table></figure>
</li>
<li><p>发送数据和header</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"> import urllib.parse  </div><div class="line">import urllib.request  </div><div class="line">url = &apos;&apos;  </div><div class="line">user_agent = &apos;Mozilla/4.0 (compatible; MSIE 5.5; Windows NT)&apos;  </div><div class="line">values = &#123;  </div><div class="line">&apos;act&apos; : &apos;login&apos;,  </div><div class="line">&apos;login[email]&apos; : &apos;&apos;,  </div><div class="line">&apos;login[password]&apos; : &apos;&apos;  </div><div class="line">&#125;  </div><div class="line">headers = &#123; &apos;User-Agent&apos; : user_agent &#125;  </div><div class="line">data = urllib.parse.urlencode(values)  </div><div class="line">req = urllib.request.Request(url, data, headers)  </div><div class="line">response = urllib.request.urlopen(req)  </div><div class="line">the_page = response.read()  </div><div class="line">print(the_page.decode(&quot;utf8&quot;))</div></pre></td></tr></table></figure>
</li>
<li><p>处理http 错误  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">import urllib.request  </div><div class="line">req = urllib.request.Request(&apos; &apos;)  </div><div class="line">try:  </div><div class="line">       urllib.request.urlopen(req)  </div><div class="line">except urllib.error.HTTPError as e:  </div><div class="line">       print(e.code)  </div><div class="line">       print(e.read().decode(&quot;utf8&quot;))</div></pre></td></tr></table></figure>
</li>
<li><p>异常处理1</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"> from urllib.request import Request, urlopen  </div><div class="line"> from urllib.error import URLError, HTTPError  </div><div class="line"> req = Request(&quot;http://www..net /&quot;)  </div><div class="line"> try:  </div><div class="line">        response = urlopen(req)  </div><div class="line"> except HTTPError as e:  </div><div class="line">        print(&apos;The server couldn&apos;t fulfill the request.&apos;)  </div><div class="line">        print(&apos;Error code: &apos;, e.code)  </div><div class="line"> except URLError as e:  </div><div class="line">        print(&apos;We failed to reach a server.&apos;)  </div><div class="line">        print(&apos;Reason: &apos;, e.reason)  </div><div class="line">else:  </div><div class="line">        print(&quot;good!&quot;)  </div><div class="line">        print(response.read().decode(&quot;utf8&quot;))</div></pre></td></tr></table></figure>
</li>
<li><p>异常处理2  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">from urllib.request import Request, urlopen  </div><div class="line"> from urllib.error import  URLError  </div><div class="line"> req = Request(&quot;http://www.Python.org/&quot;)  </div><div class="line">try:  </div><div class="line">       response = urlopen(req)  </div><div class="line">except URLError as e:  </div><div class="line">       if hasattr(e, &apos;reason&apos;):  </div><div class="line">           print(&apos;We failed to reach a server.&apos;)  </div><div class="line">           print(&apos;Reason: &apos;, e.reason)  </div><div class="line">elif hasattr(e, &apos;code&apos;):  </div><div class="line">       print(&apos;The server couldn&apos;t fulfill the request.&apos;)  </div><div class="line">       print(&apos;Error code: &apos;, e.code)  </div><div class="line">else:  </div><div class="line">       print(&quot;good!&quot;)  </div><div class="line">       print(response.read().decode(&quot;utf8&quot;))</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://reedsun.top/2017/05/24/python/学习urblib和requests/" data-id="cj35wmtag000rg8u1weyhussy" class="article-share-link">Delen</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-python/在win命令行执行python程序" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/05/24/python/在win命令行执行python程序/" class="article-date">
  <time datetime="2017-05-24T14:01:50.700Z" itemprop="datePublished">2017-05-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>#在win命令行执行python程序<br>今天尝试了在windows命令提示符中选择python文件并执行，也发现了一些问题，现在把在win命令行中执行python程序的方法记录一下。</p>
<ul>
<li>首先，我们需要用<code>cd</code>命令来<strong>将当前目录切换为你的python文件（.py)保存目录</strong>。</li>
<li><ul>
<li>如果我们要切换的目录位于同一盘符中<em>（例如c:/work1移动到c:/work2）</em>时，直接进行切换就可以了。<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">C:\work1&gt;cd c:\work2</div><div class="line">c:\work2&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><ul>
<li>如果我们要切换的目录不属于同一盘符<em>（例如c:/work移动到e:/python）</em>时，我们会发现cmd中不可以直接进行切换，所以我们需要用以下三种方法进行切换。    </li>
</ul>
</li>
<li><ul>
<li><ul>
<li>方法一：在命令提示符的DOS窗口下直接输入<code>e:</code>。回车后就可以直接转跳到E盘符下了，然后我们就可以用<code>cd</code>指令进行操作了。<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">C:\work&gt;e:</div><div class="line"></div><div class="line">E:\&gt;cd e:\python</div><div class="line">        </div><div class="line">E:\python&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><ul>
<li><ul>
<li>方法二：输入cd /e e:也同样可以转跳到E盘符下,然后通过<code>cd</code>指令进行操作。<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">C:\work&gt;cd /e e:</div><div class="line"></div><div class="line">E:\&gt;cd e:\python</div><div class="line">        </div><div class="line">E:\python&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><ul>
<li><ul>
<li>方法三：先用<code>cd</code>命令切换到目标文件，发现没有切换到目标盘符下的相应目录，这时我们再输入<code>盘符名:</code>就发现成功切换到相应目录。<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">C:\work&gt;cd e:\python</div><div class="line"></div><div class="line">C:\work&gt;e:</div><div class="line">        </div><div class="line">E:\python&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
</li>
<li><p>然后我们可以使用<code>dir</code>命令来<strong>查看当前目录的文件和参数</strong>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"> c:\work&gt;dir</div><div class="line">驱动器 C 中的卷没有标签。</div><div class="line">卷的序列号是 62BD-615D</div><div class="line">    </div><div class="line">c:\work 的目录</div><div class="line">    </div><div class="line">        2016/09/16  21:49    &lt;DIR&gt;          .</div><div class="line">        2016/09/16  21:49    &lt;DIR&gt;          ..</div><div class="line">        2016/08/31  22:27             1,404 aa.py</div><div class="line">        2016/09/16  21:52               133 bb.py</div><div class="line">                   2 个文件          1,537 字节</div><div class="line">                   2 个目录 18,823,954,432 可用字节</div></pre></td></tr></table></figure>
<p><em>我之前在work文件夹中放入了aa.py和bb.py两个文件，如上所示，<code>dir</code>命令成功展示了work文件夹的创建时间以及这两个python文件的修改时间。</em></p>
</li>
<li><p>最后我们就可以直接输入python文件的文件名来<strong>执行python文件</strong>了</p>
</li>
</ul>
<p><strong>请注意！！</strong><br><strong>这里并不需要使用python命令进入命令行交互环境即可调用py文件。</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">C:\work&gt;aa.py 我可以猜到您设置的一个0到100的整数，快来试试吧 请输入你想让我猜的整数（0到100之间）55</div><div class="line">您让我猜的数是50吗？ 如果我猜对了，请输入c；如果我猜的比您输入的大，请输入h；如果我猜的比您输入小，请输入l： l</div><div class="line">您让我猜的数是75吗？ 如果我猜对了，请输入c；如果我猜的比您输入的大，请输入h；如果我猜的比您输入的小，请输入l： h</div><div class="line">您让我猜的数是62吗？ 如果我猜对了，请输入c；如果我猜的比您输入的大，请输入h；如果我猜的比您输入的小，请输入l： h</div><div class="line">您让我猜的数是56吗？ 如果我猜对了，请输入c；如果我猜的比您输入的大，请输入h；如果我猜的比您输入的小，请输入l： h</div><div class="line">您让我猜的数是53吗？ 如果我猜对了，请输入c；如果我猜的比您输入的大，请输入h；如果我猜的比您输入的小，请输入l： l</div><div class="line">您让我猜的数是54吗？ 如果我猜对了，请输入c；如果我猜的比您输入的大，请输入h；如果我猜的比您输入的小，请输入l： l</div><div class="line">您让我猜的数是55吗？ 如果我猜对了，请输入c；如果我猜的比您输入的大，请输入h；如果我猜的比您输入的小，请输入l： c</div><div class="line">您让我猜的数果然是55，哈哈，我真厉害。</div></pre></td></tr></table></figure></p>
<p>  <em>我这里的aa文件是一个利用二分搜索猜数的小程序~</em></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://reedsun.top/2017/05/24/python/在win命令行执行python程序/" data-id="cj35wmtad000qg8u1x3otybw5" class="article-share-link">Delen</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-python/初见Python的第三方模块BeautifulSoup" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/05/24/python/初见Python的第三方模块BeautifulSoup/" class="article-date">
  <time datetime="2017-05-24T14:01:50.680Z" itemprop="datePublished">2017-05-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="初见Python的第三方模块BeautifulSoup"><a href="#初见Python的第三方模块BeautifulSoup" class="headerlink" title="初见Python的第三方模块BeautifulSoup"></a>初见Python的第三方模块BeautifulSoup</h1><ul>
<li><p><a href="https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/" target="_blank" rel="external">中文版官方文档</a></p>
</li>
<li><p>安装BeautifulSoup。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ pip install beautifulsoup4</div></pre></td></tr></table></figure>
</li>
<li><p><code>Beautiful Soup</code> 是一个可以从<code>HTML</code>或<code>XML</code>文件中提取数据的Python库.它能够通过你喜欢的转换器实现惯用的文档导航,查找,修改文档的方式.<code>Beautiful Soup</code>会帮你节省数小时甚至数天的工作时间.</p>
</li>
<li><p>解析器</p>
<ul>
<li><p><code>Beautiful Soup</code>支持Python标准库中的HTML解析器,还支持一些第三方的解析器,其中一个是 <code>lxml</code> .根据操作系统不同,可以选择下列方法来安装<code>lxml</code>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$ apt-get install Python-lxml</div><div class="line"></div><div class="line">$ easy_install lxml</div><div class="line"></div><div class="line">$ pip install lxml</div></pre></td></tr></table></figure>
</li>
<li><p>另一个可供选择的解析器是纯Python实现的 <code>html5lib</code> , html5lib的解析方式与浏览器相同,可以选择下列方法来安装<code>html5lib</code>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$ apt-get install Python-html5lib</div><div class="line"></div><div class="line">$ easy_install html5lib</div><div class="line"></div><div class="line">$ pip install html5lib</div></pre></td></tr></table></figure>
</li>
<li><p>推荐使用lxml作为解析器,因为效率更高.</p>
</li>
<li>下表列出了主要的解析器,以及它们的优缺点:<br>|解析器    |使用方法|    优势    |劣势|<br>| — | — | — | — |<br>|Python标准库|    BeautifulSoup(markup, “html.parser”)    |Python的内置标准库,执行速度适中,文档容错能力强|Python 2.7.3 or 3.2.2)前 的版本中文档容错能力差|<br>|lxml HTML 解析器|    BeautifulSoup(markup, “lxml”)       |速度快,文档容错能力强|需要安装C语言库|<br>|lxml XML 解析器|    BeautifulSoup(markup, [“lxml”, “xml”])，BeautifulSoup(markup, “xml”)|速度快唯一支持XML的解析器|需要安装C语言库|<br>|html5lib|    BeautifulSoup(markup, “html5lib”)|    最好的容错性，以浏览器的方式解析文档，生成HTML5格式的文档|速度慢，不依赖外部扩展|</li>
</ul>
</li>
</ul>
<p>##如何使用</p>
<ul>
<li><p>将一段文档传入<code>BeautifulSoup</code> 的构造方法,就能得到一个文档的对象, 可以传入一段字符串或一个文件句柄.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">from bs4 import BeautifulSoup</div><div class="line"></div><div class="line">soup = BeautifulSoup(open(&quot;index.html&quot;))</div><div class="line"></div><div class="line">soup = BeautifulSoup(&quot;&lt;html&gt;data&lt;/html&gt;&quot;)</div></pre></td></tr></table></figure>
</li>
<li><p>首先,文档被转换成Unicode,并且HTML的实例都被转换成Unicode编码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">BeautifulSoup(&quot;Sacr&amp;eacute; bleu!&quot;)</div><div class="line">&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;Sacré bleu!&lt;/body&gt;&lt;/html&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<p>然后,Beautiful Soup选择最合适的解析器来解析这段文档,如果手动指定解析器那么Beautiful Soup会选择指定的解析器来解析文档.</p>
<ul>
<li>建议，传入<code>BeautifulSoup</code>时就定义好解析器，就像如下：<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">BeautifulSoup([your markup], &quot;html.parser&quot;)</div></pre></td></tr></table></figure>
</li>
</ul>
<p>##对象的种类</p>
<ul>
<li><code>Beautiful Soup</code>将复杂HTML文档转换成一个复杂的树形结构,每个节点都是Python对象,所有对象可以归纳为4种: <code>Tag</code>, <code>NavigableString</code> , <code>BeautifulSoup</code> , <code>Comment</code> .</li>
</ul>
<p>##搜索文档树</p>
<ul>
<li>Beautiful Soup定义了很多搜索方法,在这里我先只学习这一个<code>find()</code></li>
</ul>
<p>###find()</p>
<ul>
<li><p><code>find( name , attrs , recursive , text , **kwargs )</code></p>
</li>
<li><p><code>find_all()</code> 方法将返回文档中符合条件的所有tag的列表,尽管有时候我们只想得到一个结果.比如文档中只有一个<code>&lt;body&gt;</code>标签,那么使用 <code>find_all()</code> 方法来查找<code>&lt;body&gt;</code>标签就不太合适, 使用 <code>find_all</code> 方法并设置 <code>limit=1</code> 参数也可以做到，但是远不如直接使用 find() 方法来的方便.下面两行代码是等价的:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">soup.find_all(&apos;title&apos;, limit=1)</div><div class="line"># [&lt;title&gt;The Dormouse&apos;s story&lt;/title&gt;]</div><div class="line"></div><div class="line">soup.find(&apos;title&apos;)</div><div class="line"># &lt;title&gt;The Dormouse&apos;s story&lt;/title&gt;</div></pre></td></tr></table></figure>
</li>
<li><p>唯一的区别是 find_all() 方法的返回结果是值包含一个元素的列表,而 find() 方法直接返回结果.</p>
</li>
<li><p>find_all() 方法没有找到目标是返回空列表, find() 方法找不到目标时,返回 None .</p>
</li>
</ul>
<p>##CSS选择器</p>
<ul>
<li><p><code>Beautiful Soup</code>支持大部分的CSS选择器 ,在 <code>Tag</code> 或 <code>BeautifulSoup</code> 对象的 <code>.select()</code> 方法中传入字符串参数,即可使用CSS选择器的语法找到tag:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">soup.select(&quot;title&quot;)</div><div class="line"># [&lt;title&gt;The Dormouse&apos;s story&lt;/title&gt;]</div></pre></td></tr></table></figure>
</li>
<li><p>可以通过传入多个tag标签逐层查找:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">soup.select(&quot;body a&quot;)</div><div class="line"># [&lt;a class=&quot;sister&quot; href=&quot;http://example.com/elsie&quot; id=&quot;link1&quot;&gt;Elsie&lt;/a&gt;,</div><div class="line">#  &lt;a class=&quot;sister&quot; href=&quot;http://example.com/lacie&quot;  id=&quot;link2&quot;&gt;Lacie&lt;/a&gt;,</div><div class="line">#  &lt;a class=&quot;sister&quot; href=&quot;http://example.com/tillie&quot; id=&quot;link3&quot;&gt;Tillie&lt;/a&gt;]</div><div class="line"></div><div class="line">soup.select(&quot;html head title&quot;)</div><div class="line"># [&lt;title&gt;The Dormouse&apos;s story&lt;/title&gt;]</div></pre></td></tr></table></figure>
</li>
<li><p>也可以通过使用大于号&lt;的方式找到某个tag标签下的直接子标签：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">soup.select(&quot;head &gt; title&quot;)</div><div class="line"># [&lt;title&gt;The Dormouse&apos;s story&lt;/title&gt;]</div><div class="line"></div><div class="line">soup.select(&quot;p &gt; a&quot;)</div><div class="line"># [&lt;a class=&quot;sister&quot; href=&quot;http://example.com/elsie&quot; id=&quot;link1&quot;&gt;Elsie&lt;/a&gt;,</div><div class="line">#  &lt;a class=&quot;sister&quot; href=&quot;http://example.com/lacie&quot;  id=&quot;link2&quot;&gt;Lacie&lt;/a&gt;,</div><div class="line">#  &lt;a class=&quot;sister&quot; href=&quot;http://example.com/tillie&quot; id=&quot;link3&quot;&gt;Tillie&lt;/a&gt;]</div><div class="line"></div><div class="line">soup.select(&quot;p &gt; a:nth-of-type(2)&quot;)</div><div class="line"># [&lt;a class=&quot;sister&quot; href=&quot;http://example.com/lacie&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt;]</div><div class="line"></div><div class="line">soup.select(&quot;p &gt; #link1&quot;)</div><div class="line"># [&lt;a class=&quot;sister&quot; href=&quot;http://example.com/elsie&quot; id=&quot;link1&quot;&gt;Elsie&lt;/a&gt;]</div><div class="line"></div><div class="line">soup.select(&quot;body &gt; a&quot;)</div><div class="line"># []</div></pre></td></tr></table></figure>
</li>
<li><p>通过CSS的类名查找</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">soup.select(&quot;.sister&quot;)</div><div class="line"># [&lt;a class=&quot;sister&quot; href=&quot;http://example.com/elsie&quot; id=&quot;link1&quot;&gt;Elsie&lt;/a&gt;,</div><div class="line">#  &lt;a class=&quot;sister&quot; href=&quot;http://example.com/lacie&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt;,</div><div class="line">#  &lt;a class=&quot;sister&quot; href=&quot;http://example.com/tillie&quot; id=&quot;link3&quot;&gt;Tillie&lt;/a&gt;]</div><div class="line"></div><div class="line">soup.select(&quot;[class~=sister]&quot;)</div><div class="line"># [&lt;a class=&quot;sister&quot; href=&quot;http://example.com/elsie&quot; id=&quot;link1&quot;&gt;Elsie&lt;/a&gt;,</div><div class="line">#  &lt;a class=&quot;sister&quot; href=&quot;http://example.com/lacie&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt;,</div><div class="line">#  &lt;a class=&quot;sister&quot; href=&quot;http://example.com/tillie&quot; id=&quot;link3&quot;&gt;Tillie&lt;/a&gt;]</div></pre></td></tr></table></figure>
</li>
<li><p>通过tag的id查找</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">soup.select(&quot;#link1&quot;)</div><div class="line"># [&lt;a class=&quot;sister&quot; href=&quot;http://example.com/elsie&quot; id=&quot;link1&quot;&gt;Elsie&lt;/a&gt;]</div><div class="line"></div><div class="line">soup.select(&quot;a#link2&quot;)</div><div class="line"># [&lt;a class=&quot;sister&quot; href=&quot;http://example.com/lacie&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt;]</div></pre></td></tr></table></figure>
</li>
<li><p>通过是否存在某个属性来查找:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">soup.select(&apos;a[href]&apos;)</div><div class="line"># [&lt;a class=&quot;sister&quot; href=&quot;http://example.com/elsie&quot; id=&quot;link1&quot;&gt;Elsie&lt;/a&gt;,</div><div class="line">#  &lt;a class=&quot;sister&quot; href=&quot;http://example.com/lacie&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt;,</div><div class="line">#  &lt;a class=&quot;sister&quot; href=&quot;http://example.com/tillie&quot; id=&quot;link3&quot;&gt;Tillie&lt;/a&gt;]</div></pre></td></tr></table></figure>
</li>
<li><p>通过属性的值来查找:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">soup.select(&apos;a[href=&quot;http://example.com/elsie&quot;]&apos;)</div><div class="line"># [&lt;a class=&quot;sister&quot; href=&quot;http://example.com/elsie&quot; id=&quot;link1&quot;&gt;Elsie&lt;/a&gt;]</div><div class="line"></div><div class="line">soup.select(&apos;a[href^=&quot;http://example.com/&quot;]&apos;)</div><div class="line"># [&lt;a class=&quot;sister&quot; href=&quot;http://example.com/elsie&quot; id=&quot;link1&quot;&gt;Elsie&lt;/a&gt;,</div><div class="line">#  &lt;a class=&quot;sister&quot; href=&quot;http://example.com/lacie&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt;,</div><div class="line">#  &lt;a class=&quot;sister&quot; href=&quot;http://example.com/tillie&quot; id=&quot;link3&quot;&gt;Tillie&lt;/a&gt;]</div><div class="line"></div><div class="line">soup.select(&apos;a[href$=&quot;tillie&quot;]&apos;)</div><div class="line"># [&lt;a class=&quot;sister&quot; href=&quot;http://example.com/tillie&quot; id=&quot;link3&quot;&gt;Tillie&lt;/a&gt;]</div><div class="line"></div><div class="line">soup.select(&apos;a[href*=&quot;.com/el&quot;]&apos;)</div><div class="line"># [&lt;a class=&quot;sister&quot; href=&quot;http://example.com/elsie&quot; id=&quot;link1&quot;&gt;Elsie&lt;/a&gt;]</div></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>BeautifulSoup实际上就是对HTMLParser的人性化封装，它的功能很强大，我现在只学习了一点皮毛，以后还要多翻看官方文档才是，加油~</strong></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://reedsun.top/2017/05/24/python/初见Python的第三方模块BeautifulSoup/" data-id="cj35wmta9000pg8u17zxqowpm" class="article-share-link">Delen</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-python/关于python中inspect模块的一些探究" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/05/24/python/关于python中inspect模块的一些探究/" class="article-date">
  <time datetime="2017-05-24T14:01:50.670Z" itemprop="datePublished">2017-05-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="关于python中inspect模块的一些探究"><a href="#关于python中inspect模块的一些探究" class="headerlink" title="关于python中inspect模块的一些探究"></a>关于python中inspect模块的一些探究</h1><p>标签： Python</p>
<hr>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>我在学习到<a href="http://www.liaoxuefeng.com/wiki/0014316089557264a6b348958f449949df42a6d3a2e542c000/001432339008728d0ddbe19ee594980be3f0644a9371894000" target="_blank" rel="external">实战Day5 - python教程 - 廖雪峰的官方网站</a>时，遇到了inspect模块，之前对这个inspect模块一无所知啊，所以本着打破砂锅问到底的精神，决定对inspect模块做一些探究。</p>
<p>根据度娘搜到的，inspect模块主要提供了四种用处：</p>
<p>(1). 对是否是模块，框架，函数等进行类型检查。</p>
<p>(2). 获取源码</p>
<p>(3). 获取类或函数的参数的信息</p>
<p>(4). 解析堆栈</p>
<p>我在这次课程中，只用到了第三种用处，即获取类或函数的参数的信息，下面我来探究一下。</p>
<h2 id="探究"><a href="#探究" class="headerlink" title="探究"></a>探究</h2><p>结合我正在学习的课程，我自己也对inspect做了一些探究。根据在课程中用到的一些函数及方法，我做了一个python脚本。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"># test</div><div class="line">import inspect</div><div class="line">def a(a, b=0, *c, d, e=1, **f):</div><div class="line">    pass</div><div class="line">aa = inspect.signature(a)</div><div class="line">print(&quot;inspect.signature（fn)是:%s&quot; % aa)</div><div class="line">print(&quot;inspect.signature（fn)的类型：%s&quot; % (type(aa)))</div><div class="line">print(&quot;\n&quot;)</div><div class="line"></div><div class="line">bb = aa.parameters</div><div class="line">print(&quot;signature.paramerters属性是:%s&quot; % bb)</div><div class="line">print(&quot;ignature.paramerters属性的类型是%s&quot; % type(bb))</div><div class="line">print(&quot;\n&quot;)</div><div class="line"></div><div class="line">for cc, dd in bb.items():</div><div class="line">    print(&quot;mappingproxy.items()返回的两个值分别是：%s和%s&quot; % (cc, dd))</div><div class="line">    print(&quot;mappingproxy.items()返回的两个值的类型分别是：%s和%s&quot; % (type(cc), type(dd)))</div><div class="line">    print(&quot;\n&quot;)</div><div class="line">    ee = dd.kind</div><div class="line">    print(&quot;Parameter.kind属性是:%s&quot; % ee)</div><div class="line">    print(&quot;Parameter.kind属性的类型是:%s&quot; % type(ee))</div><div class="line">    print(&quot;\n&quot;)</div><div class="line">    gg = dd.default</div><div class="line">    print(&quot;Parameter.default的值是: %s&quot; % gg)</div><div class="line">    print(&quot;Parameter.default的属性是: %s&quot; % type(gg))</div><div class="line">    print(&quot;\n&quot;)</div><div class="line">    </div><div class="line"></div><div class="line">ff = inspect.Parameter.KEYWORD_ONLY</div><div class="line">print(&quot;inspect.Parameter.KEYWORD_ONLY的值是:%s&quot; % ff)</div><div class="line">print(&quot;inspect.Parameter.KEYWORD_ONLY的类型是:%s&quot; % type(ff))</div></pre></td></tr></table></figure></p>
<p>执行以上脚本，将得到如下输出：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div></pre></td><td class="code"><pre><div class="line">inspect.signature（fn)是:(a, b=0, *c, d, e=1, **f)</div><div class="line">inspect.signature（fn)的类型：&lt;class &apos;inspect.Signature&apos;&gt;</div><div class="line"></div><div class="line"></div><div class="line">signature.paramerters属性是:OrderedDict([(&apos;a&apos;, &lt;Parameter &quot;a&quot;&gt;), (&apos;b&apos;, &lt;Parameter &quot;b=0&quot;&gt;), (&apos;c&apos;, &lt;Parameter &quot;*c&quot;&gt;), (&apos;d&apos;, &lt;Parameter &quot;d&quot;&gt;), (&apos;e&apos;, &lt;Parameter &quot;e=1&quot;&gt;), (&apos;f&apos;, &lt;Parameter &quot;**f&quot;&gt;)])</div><div class="line">ignature.paramerters属性的类型是&lt;class &apos;mappingproxy&apos;&gt;</div><div class="line"></div><div class="line"></div><div class="line">mappingproxy.items()返回的两个值分别是：a和a</div><div class="line">mappingproxy.items()返回的两个值的类型分别是：&lt;class &apos;str&apos;&gt;和&lt;class &apos;inspect.Parameter&apos;&gt;</div><div class="line"></div><div class="line"></div><div class="line">Parameter.kind属性是:POSITIONAL_OR_KEYWORD</div><div class="line">Parameter.kind属性的类型是:&lt;enum &apos;_ParameterKind&apos;&gt;</div><div class="line"></div><div class="line"></div><div class="line">Parameter.default的值是: &lt;class &apos;inspect._empty&apos;&gt;</div><div class="line">Parameter.default的属性是: &lt;class &apos;type&apos;&gt;</div><div class="line"></div><div class="line"></div><div class="line">mappingproxy.items()返回的两个值分别是：b和b=0</div><div class="line">mappingproxy.items()返回的两个值的类型分别是：&lt;class &apos;str&apos;&gt;和&lt;class &apos;inspect.Parameter&apos;&gt;</div><div class="line"></div><div class="line"></div><div class="line">Parameter.kind属性是:POSITIONAL_OR_KEYWORD</div><div class="line">Parameter.kind属性的类型是:&lt;enum &apos;_ParameterKind&apos;&gt;</div><div class="line"></div><div class="line"></div><div class="line">Parameter.default的值是: 0</div><div class="line">Parameter.default的属性是: &lt;class &apos;int&apos;&gt;</div><div class="line"></div><div class="line"></div><div class="line">mappingproxy.items()返回的两个值分别是：c和*c</div><div class="line">mappingproxy.items()返回的两个值的类型分别是：&lt;class &apos;str&apos;&gt;和&lt;class &apos;inspect.Parameter&apos;&gt;</div><div class="line"></div><div class="line"></div><div class="line">Parameter.kind属性是:VAR_POSITIONAL</div><div class="line">Parameter.kind属性的类型是:&lt;enum &apos;_ParameterKind&apos;&gt;</div><div class="line"></div><div class="line"></div><div class="line">Parameter.default的值是: &lt;class &apos;inspect._empty&apos;&gt;</div><div class="line">Parameter.default的属性是: &lt;class &apos;type&apos;&gt;</div><div class="line"></div><div class="line"></div><div class="line">mappingproxy.items()返回的两个值分别是：d和d</div><div class="line">mappingproxy.items()返回的两个值的类型分别是：&lt;class &apos;str&apos;&gt;和&lt;class &apos;inspect.Parameter&apos;&gt;</div><div class="line"></div><div class="line"></div><div class="line">Parameter.kind属性是:KEYWORD_ONLY</div><div class="line">Parameter.kind属性的类型是:&lt;enum &apos;_ParameterKind&apos;&gt;</div><div class="line"></div><div class="line"></div><div class="line">Parameter.default的值是: &lt;class &apos;inspect._empty&apos;&gt;</div><div class="line">Parameter.default的属性是: &lt;class &apos;type&apos;&gt;</div><div class="line"></div><div class="line"></div><div class="line">mappingproxy.items()返回的两个值分别是：e和e=1</div><div class="line">mappingproxy.items()返回的两个值的类型分别是：&lt;class &apos;str&apos;&gt;和&lt;class &apos;inspect.Parameter&apos;&gt;</div><div class="line"></div><div class="line"></div><div class="line">Parameter.kind属性是:KEYWORD_ONLY</div><div class="line">Parameter.kind属性的类型是:&lt;enum &apos;_ParameterKind&apos;&gt;</div><div class="line"></div><div class="line"></div><div class="line">Parameter.default的值是: 1</div><div class="line">Parameter.default的属性是: &lt;class &apos;int&apos;&gt;</div><div class="line"></div><div class="line"></div><div class="line">mappingproxy.items()返回的两个值分别是：f和**f</div><div class="line">mappingproxy.items()返回的两个值的类型分别是：&lt;class &apos;str&apos;&gt;和&lt;class &apos;inspect.Parameter&apos;&gt;</div><div class="line"></div><div class="line"></div><div class="line">Parameter.kind属性是:VAR_KEYWORD</div><div class="line">Parameter.kind属性的类型是:&lt;enum &apos;_ParameterKind&apos;&gt;</div><div class="line"></div><div class="line"></div><div class="line">Parameter.default的值是: &lt;class &apos;inspect._empty&apos;&gt;</div><div class="line">Parameter.default的属性是: &lt;class &apos;type&apos;&gt;</div><div class="line"></div><div class="line"></div><div class="line">inspect.Parameter.KEYWORD_ONLY的值是:KEYWORD_ONLY</div><div class="line">inspect.Parameter.KEYWORD_ONLY的类型是:&lt;enum &apos;_ParameterKind&apos;&gt;</div></pre></td></tr></table></figure></p>
<p>##总结</p>
<ul>
<li><p><code>inspect.signature（fn)</code>将返回一个<code>inspect.Signature</code>类型的对象，值为fn这个函数的所有参数</p>
</li>
<li><p><code>inspect.Signature</code>对象的<code>paramerters</code>属性是一个<code>mappingproxy</code>（映射）类型的对象，值为一个有序字典（Orderdict)。</p>
<ul>
<li><p>这个字典里的key是即为参数名，<code>str</code>类型</p>
</li>
<li><p>这个字典里的value是一个<code>inspect.Parameter</code>类型的对象，根据我的理解，这个对象里包含的一个参数的各种信息</p>
</li>
</ul>
</li>
<li><p><code>inspect.Parameter</code>对象的<code>kind</code>属性是一个<code>_ParameterKind</code>枚举类型的对象，值为这个参数的类型（可变参数，关键词参数，etc）</p>
</li>
<li><p><code>inspect.Parameter</code>对象的<code>default</code>属性：如果这个参数有默认值，即返回这个默认值，如果没有，返回一个<code>inspect._empty</code>类。</p>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://reedsun.top/2017/05/24/python/关于python中inspect模块的一些探究/" data-id="cj35wmta1000og8u10cie0g4m" class="article-share-link">Delen</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-python/使用python的email、smtplib、poplib模块收发邮件" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/05/24/python/使用python的email、smtplib、poplib模块收发邮件/" class="article-date">
  <time datetime="2017-05-24T14:01:50.630Z" itemprop="datePublished">2017-05-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="使用python的email、smtplib、poplib模块收发邮件"><a href="#使用python的email、smtplib、poplib模块收发邮件" class="headerlink" title="使用python的email、smtplib、poplib模块收发邮件"></a>使用python的email、smtplib、poplib模块收发邮件</h1><ul>
<li>一封电子邮件的旅程是：<ul>
<li>MUA：Mail User Agent——邮件用户代理。(即类似Outlook的电子邮件软件）</li>
<li>MTA：Mail Transfer Agent——邮件传输代理，就是那些Email服务提供商，比如网易、新浪等等。</li>
<li>MDA：Mail Delivery Agent——邮件投递代理。Email服务提供商的某个服务器</li>
</ul>
</li>
</ul>
<blockquote>
<p>发件人 -&gt; MUA -&gt; MTA -&gt; MTA -&gt; 若干个MTA -&gt; MDA &lt;- MUA &lt;- 收件人</p>
</blockquote>
<ul>
<li><p>要编写程序来发送和接收邮件，本质上就是：</p>
<ul>
<li><p>编写MUA把邮件发到MTA；</p>
</li>
<li><p>编写MUA从MDA上收邮件。</p>
</li>
</ul>
</li>
<li><p>发邮件时，MUA和MTA使用的协议就是SMTP：Simple Mail Transfer Protocol，后面的MTA到另一个MTA也是用SMTP协议。</p>
</li>
<li>收邮件时，MUA和MDA使用的协议有两种：POP：Post Office Protocol，目前版本是3，俗称POP3；IMAP：Internet Message Access Protocol，目前版本是4，优点是不但能取邮件，还可以直接操作MDA上存储的邮件，比如从收件箱移到垃圾箱，等等。</li>
</ul>
<ul>
<li>构造一个邮件对象就是一个Messag对象，如果构造一个MIMEText对象，就表示一个文本邮件对象，如果构造一个MIMEImage对象，就表示一个作为附件的图片，要把多个对象组合起来，就用MIMEMultipart对象，而MIMEBase可以表示任何对象。它们的继承关系如下：</li>
</ul>
<blockquote>
<p>Message</p>
<blockquote>
<p>+- MIMEBase</p>
<blockquote>
<p>  +- MIMEMultipart<br>      +- MIMENonMultipart</p>
<blockquote>
<pre><code>+- MIMEMessage
 +- MIMEText
 +- MIMEImage
</code></pre></blockquote>
</blockquote>
</blockquote>
</blockquote>
<p>##发送邮件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div></pre></td><td class="code"><pre><div class="line">from email.mime.text import MIMEText</div><div class="line"># email模块负责构造邮件</div><div class="line"># 类email.mime.text.MIMEText(_text)，是使用字符串_text来生成MIME对象的主体文本</div><div class="line"># MIME是(Multipurpose Internet Mail Extensions) 多用途互联网邮件扩展类型</div><div class="line"># MIME是设置将某种扩展名文件用一种应用程序来打开的方式类型</div><div class="line"># MIME设置的目的是为了在发送电子邮件时附加多媒体数据，让邮件根据其类型进行处理。</div><div class="line"></div><div class="line"></div><div class="line">import smtplib</div><div class="line"># smtplib模块负责发送邮件</div><div class="line"># 类smtplib.SMTP([host[, port[, local_hostname[, timeout]]]]) ：SMTP对象</div><div class="line">    # 其中，host：smtp服务器主机名</div><div class="line">    # 其中，port：smtp服务器的端口，默认是25</div><div class="line"># 如果在创建SMTP对象时定义了这两个参数，在初始化时会自动调用connect方式连接服务器</div><div class="line"># smtplib模块还提供了SMTP_SSL类和LMTP类，对它们的操作与SMTP基本一致。</div><div class="line"># SSL是一种安全传输，LMTP是与SMTP不同的另一种传输协议</div><div class="line"></div><div class="line"></div><div class="line">from email.header import Header</div><div class="line"># 如果你想让你的邮件标题使用非ASCII字符集，就要使用email.header编码非ASCII字符集</div><div class="line"># email.header.Header(s=None, charset=None, maxlinelen=None, header_name=None, continuation_ws=&apos; &apos;, errors=&apos;strict&apos;)</div><div class="line">    # 创建一个能容纳不同字符集的字符串的MIME对象的标头</div><div class="line">    # 其中，s：初始标头，即要编码之前的标头</div><div class="line">    # 其中，chatset：字符集，默认为ASCII</div><div class="line">    # 其中，maxlinelen：标头名的行的最大长度，默认为76</div><div class="line">    # 其中，header_name：标头名，默认无</div><div class="line">    # 其中，continuation_ws：默认为单个空格字符</div><div class="line">    # 其中，errors：直接传递到Header的append()方法里</div><div class="line"></div><div class="line"></div><div class="line">from email.utils import parseaddr, formataddr</div><div class="line"># email.utils:杂项工具</div><div class="line"># email.utils.parseaddr(address):解析地址的功能，</div><div class="line">    # 其中，address是一个包含用户名和email地址的值（realname&lt;address&gt;），返回一个二元组(realname, email address)</div><div class="line"># email.utils.formataddr(pair, charset=&apos;utf-8&apos;)</div><div class="line">    # 其中，pair是二元组(realname, email address)</div><div class="line">    # 其中，charset是字符串，默认为utf-8</div><div class="line"># 实际上，parseaddr(), formataddr(),两者互逆</div><div class="line"></div><div class="line"></div><div class="line">from email.mime.base import MIMEBase</div><div class="line"># email.mime.base.MIMEBase(_maintype, _subtype, **_params)</div><div class="line">    # 这是MIME的一个基类。一般不需要在使用时创建实例。</div><div class="line">    # 其中_maintype是内容类型，如text或者image。</div><div class="line">    # _subtype是内容的minor type 类型，如plain或者gif。</div><div class="line">    # **_params是一个字典，直接传递给Message.add_header()。</div><div class="line"></div><div class="line"></div><div class="line">from email.mime.multipart import MIMEMultipart</div><div class="line"># email.mime.multipart.MIMEMultipart(_subtype=&apos;mixed&apos;, boundary=None, _subparts=None, **_params)</div><div class="line">    # MIMEMultipart是MIMEBase的一个子类，多个MIME对象的集合</div><div class="line">    # _subtype默认值为mixed。boundary是MIMEMultipart的边界，默认边界是可数的。</div><div class="line"></div><div class="line"></div><div class="line">from email import encoders</div><div class="line"># email.encoders 功能是编码器</div><div class="line"></div><div class="line"></div><div class="line">def _format_addr(s):</div><div class="line"># 这个函数的作用是把一个标头的用户名编码成utf-8格式的，如果不编码原标头中文用户名，用户名将无法被邮件解码</div><div class="line">    name, addr = parseaddr(s)</div><div class="line">    return formataddr((Header(name, &quot;utf-8&quot;).encode(), addr))</div><div class="line">    # Header().encode(splitchars=&apos;;, \t&apos;, maxlinelen=None, linesep=&apos;\n&apos;)</div><div class="line">        # 功能：编码一个邮件标头，使之变成一个RFC兼容的格式</div><div class="line"></div><div class="line"></div><div class="line"># 先定义Email的地址，口令和SMTP服务器地址</div><div class="line">from_addr = &quot;947503956@qq.com&quot;</div><div class="line">password = input(&quot;请输入发送邮箱的密码:&quot;)</div><div class="line">to_addr = &quot;sunwstmz@163.com&quot;</div><div class="line">smtp_server = &quot;smtp.qq.com&quot;</div><div class="line"></div><div class="line"></div><div class="line"># 接下来定义邮件本身的内容</div><div class="line">msg = MIMEMultipart()</div><div class="line">msg[&quot;From&quot;] = _format_addr(&quot;发送者ReedSun &lt;%s&gt;&quot; % from_addr)</div><div class="line">msg[&quot;To&quot;] = _format_addr(&quot;接收者ReedSun &lt;%s&gt;&quot; % to_addr)</div><div class="line">msg[&quot;Subject&quot;] = Header(&quot;哈哈哈 这是一封测试信&quot;, &quot;utf-8&quot;).encode()</div><div class="line"># 定义邮件正文</div><div class="line">msg.attach(MIMEText(&quot;这是一封来自大魔王ReedSun，用Python发来的邮件&quot;, &quot;plain&quot;, &quot;utf-8&quot;))</div><div class="line"># class email.mime.text.MIMEText(_text[, _subtype[, _charset]])：MIME文本对象，</div><div class="line">    # 其中, _text是邮件内容，</div><div class="line">    # 其中, _subtype邮件类型(MIME类型)，可以是text/plain（普通文本邮件），html/plain(html邮件),</div><div class="line">    # 其中, _charset编码（charset：字符集），可以是gb2312等等。</div><div class="line"># message.attch(payload) 将给定的附件或信息，添加到已有的有效附件或信息中，在调用之前必须是None或者List，调用后。payload将变成信息对象的列表</div><div class="line"># 如果你想将payload设置成一个标量对象，要使用set_payload()</div><div class="line">with open(&apos;c:/work/test.jpg&apos;, &apos;rb&apos;) as f:</div><div class="line">    mime = MIMEBase(&quot;image&quot;, &quot;jpg&quot;, filename=&quot;test.jpg&quot;)</div><div class="line">    mime.add_header(&quot;Content-Disposition&quot;, &quot;attchment&quot;, filename=&quot;test.jpg&quot;)</div><div class="line">    # add_header(_name, _value, **_params) 扩展标头设置</div><div class="line">        # _name：要添加的标头字段</div><div class="line">        # _value：标头的内容</div><div class="line">    # Content-Disposition就是当用户想把请求所得的内容存为一个文件的时候提供一个默认的文件名。</div><div class="line">        # 希望某类或者某已知MIME 类型的文件（比如：*.gif;*.txt;*.htm）能够在访问时弹出“文件下载”对话框。</div><div class="line">    mime.add_header(&quot;Content-ID&quot;, &quot;&lt;0&gt;&quot;)</div><div class="line">    mime.add_header(&quot;X-Attachment-Id&quot;, &quot;0&quot;)</div><div class="line">    mime.set_payload(f.read())</div><div class="line">    # set_payload(payload, charset=None)</div><div class="line">        # 将附件添加到payload中</div><div class="line">    encoders.encode_base64(mime)</div><div class="line">    # encoders.encode_base64(mime) 将payload内容编码为base64格式</div><div class="line">    msg.attach(mime)</div><div class="line"></div><div class="line"></div><div class="line"># 接下来定义发送文件</div><div class="line">server = smtplib.SMTP_SSL(smtp_server, 465)</div><div class="line"># qq邮箱使用SSL连接，端口为465</div><div class="line">server.set_debuglevel(1)</div><div class="line"># SMTP.set_debuglevel(level)：设置是否为调试模式。默认为False，即非调试模式，</div><div class="line"># 非调试模式：表示不输出任何调试信息。</div><div class="line">server.login(from_addr, password)</div><div class="line"># 登陆到smtp服务器。</div><div class="line"># 现在几乎所有的smtp服务器，都必须在验证用户信息合法之后才允许发送邮件。</div><div class="line">server.sendmail(from_addr, [to_addr], msg.as_string())</div><div class="line"># SMTP.sendmail(from_addr, to_addrs, msg[, mail_options, rcpt_options]) ：发送邮件。</div><div class="line"># 这里要注意一下第三个参数，msg是字符串，表示邮件。</div><div class="line"># 我们知道邮件一般由标题，发信人，收件人，邮件内容，附件等构成，</div><div class="line"># 发送邮件的时候，要注意msg的格式。这个格式就是smtp协议中定义的格式。</div><div class="line"># 第二个参数，接受邮箱为一个列表，表示可以设置多个接受邮箱</div><div class="line"># as_string()是MIMEMessage对象的一个方法，表示把MIMETest对象变成str</div><div class="line">server.quit()</div><div class="line"># 断开与smtp服务器的连接，相当于发送&quot;quit&quot;指令。</div></pre></td></tr></table></figure></p>
<p>##接受邮件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div></pre></td><td class="code"><pre><div class="line">from email.parser import Parser</div><div class="line"># email.parser 解析电子邮件</div><div class="line">    # 返回这个对象的email.message.Message实例</div><div class="line">from email.header import decode_header</div><div class="line">from email.utils import parseaddr</div><div class="line">import poplib</div><div class="line"></div><div class="line"></div><div class="line">email = &quot;947503956@qq.com&quot;</div><div class="line">password = input(&quot;密码:&quot;)</div><div class="line">pop3_server = &quot;pop.qq.com&quot;</div><div class="line"></div><div class="line"># 连接到POP3服务器</div><div class="line">server = poplib.POP3_SSL(pop3_server)</div><div class="line"># 注意qq邮箱使用SSL连接</div><div class="line"># 打开调试信息</div><div class="line">server.set_debuglevel(1)</div><div class="line"># 打印POP3服务器的欢迎文字</div><div class="line">print(server.getwelcome().decode(&quot;utf-8&quot;))</div><div class="line"></div><div class="line"># 身份认证</div><div class="line">server.user(email)</div><div class="line">server.pass_(password)</div><div class="line"></div><div class="line"># stat()返回邮件数量和占用空间</div><div class="line">print(&quot;信息数量：%s 占用空间 %s&quot; % server.stat())</div><div class="line"># list()返回(response, [&apos;mesg_num octets&apos;, ...], octets)，第二项是编号</div><div class="line">resp, mails, octets = server.list()</div><div class="line">print(&quot;list!!!!&quot;,server.list())</div><div class="line"># 返回的列表类似[b&apos;1 82923&apos;, b&apos;2 2184&apos;, ...]</div><div class="line">print(mails)</div><div class="line"></div><div class="line"># 获取最新一封邮件，注意索引号从1开始</div><div class="line"># POP3.retr(which) 检索序号which的真个消息，然后设置他的出现标志 返回(response, [&apos;line&apos;, ...], octets)这个三元组</div><div class="line">index = len(mails)</div><div class="line">resp, lines, ocetes = server.retr(index)</div><div class="line"></div><div class="line"># lines 存储了邮件的原始文本的每一行</div><div class="line"># 可以获得整个邮件的原始文本</div><div class="line">msg_content = b&quot;\r\n&quot;.join(lines).decode(&quot;utf-8&quot;)</div><div class="line"># 稍后解析出邮件</div><div class="line">msg = Parser().parsestr(msg_content)</div><div class="line"># email.Parser.parsestr(text, headersonly=False)</div><div class="line">    # 与parser()方法类似，不同的是他接受一个字符串对象而不是一个类似文件的对象</div><div class="line">    # 可选的headersonly表示是否在解析玩标题后停止解析，默认为否</div><div class="line">    # 返回根消息对象</div><div class="line"></div><div class="line"># 关闭连接</div><div class="line">server.quit()</div><div class="line"></div><div class="line"></div><div class="line">#### 解析邮件</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"># 邮件的Subject或者Email中包含的名字都是经过编码后的str，要正常显示，就必须decode</div><div class="line">def decode_str(s):</div><div class="line">    value, charset = decode_header(s)[0]</div><div class="line">    # decode_header()返回一个list，因为像Cc、Bcc这样的字段可能包含多个邮件地址，所以解析出来的会有多个元素。上面的代码我们偷了个懒，只取了第一个元素。</div><div class="line">    if charset:</div><div class="line">        value = value.decode(charset)</div><div class="line">    return value</div><div class="line"></div><div class="line"></div><div class="line"># 文本邮件的内容也是str，还需要检测编码，否则，非UTF-8编码的邮件都无法正常显示</div><div class="line">def guess_charset(msg):</div><div class="line">    charset = msg.get_charset()</div><div class="line">    if charset is None:</div><div class="line">        content_type = msg.get(&apos;Content-Type&apos;, &apos;&apos;).lower()</div><div class="line">        pos = content_type.find(&apos;charset=&apos;)</div><div class="line">        if pos &gt;= 0:</div><div class="line">            charset = content_type[pos + 8:].strip()</div><div class="line">    return charset</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"># 解析邮件与构造邮件的步骤正好相反</div><div class="line">def print_info(msg, indent=0):</div><div class="line">    if indent ==0:</div><div class="line">        for header in [&quot;From&quot;, &quot;To&quot;, &quot;Subject&quot;]:</div><div class="line">            value = msg.get(header, &quot;&quot;)</div><div class="line">            if value:</div><div class="line">                if header == &quot;Subject&quot;:</div><div class="line">                    vaule = decode_str(value)</div><div class="line">                else:</div><div class="line">                    hdr, addr =parseaddr(value)</div><div class="line">                    name = decode_str(hdr)</div><div class="line">                    value = u&quot;%s &lt;%s&gt;&quot; % (name, addr)</div><div class="line">            print(&quot;%s%s:%s&quot; % (&quot;  &quot; * indent, header, value))</div><div class="line">        if (msg .is_multipart()):</div><div class="line">            parts = msg.get_payload()</div><div class="line">            for n, part in enumerate(parts):</div><div class="line">                print(&apos;%spart %s&apos; % (&apos;  &apos; * indent, n))</div><div class="line">                print(&apos;%s--------------------&apos; % (&apos;  &apos; * indent))</div><div class="line">                print_info(part, indent + 1)</div><div class="line">        else:</div><div class="line">            content_type = msg.get_content_type()</div><div class="line">            if content_type==&apos;text/plain&apos; or content_type==&apos;text/html&apos;:</div><div class="line">                content = msg.get_payload(decode=True)</div><div class="line">                charset = guess_charset(msg)</div><div class="line">                if charset:</div><div class="line">                    content = content.decode(charset)</div><div class="line">                print(&apos;%sText: %s&apos; % (&apos;  &apos; * indent, content + &apos;...&apos;))</div><div class="line">            else:</div><div class="line">                print(&apos;%sAttachment: %s&apos; % (&apos;  &apos; * indent, content_type))</div></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://reedsun.top/2017/05/24/python/使用python的email、smtplib、poplib模块收发邮件/" data-id="cj35wmt9z000ng8u122i4i7hi" class="article-share-link">Delen</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-python/python函数中的参数" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/05/24/python/python函数中的参数/" class="article-date">
  <time datetime="2017-05-24T14:01:50.620Z" itemprop="datePublished">2017-05-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="python函数中的参数"><a href="#python函数中的参数" class="headerlink" title="python函数中的参数"></a>python函数中的参数</h1><p>##参数类型<br>python函数中的参数类型一共有五种，他们分别是 </p>
<ul>
<li><code>POSITIONAL_OR_KEYWORD</code> 位置和关键字参数</li>
<li><code>VAR_POSITIONAL</code> 可变参数</li>
<li><code>KEYWORD_ONLY</code> 关键词参数</li>
<li><code>VAR_KEYWORD</code> 可变的关键词参数</li>
<li><code>POSITIONAL_ONLY</code></li>
</ul>
<h3 id="POSITIONAL-OR-KEYWORD-位置和关键字参数"><a href="#POSITIONAL-OR-KEYWORD-位置和关键字参数" class="headerlink" title="POSITIONAL_OR_KEYWORD 位置和关键字参数"></a>POSITIONAL_OR_KEYWORD 位置和关键字参数</h3><p>第一种参数是<code>POSITIONAL_OR_KEYWORD</code>位置和关键字参数，其特点是没有任何<code>*</code>前缀。</p>
<p>如名字所见，<code>POSITIONAL_OR_KEYWORD</code>类型的参数可以通过<strong>位置</strong> <code>POSITIONAL</code>传参调用，也可以通过<strong>关键字</strong><code>KEYWORD</code>传参调用。</p>
<p>例子：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">def hahaha(a): </div><div class="line">    pass</div><div class="line"></div><div class="line"># 位置传参调用</div><div class="line">hahaha(1)</div><div class="line"># 关键字传参调用</div><div class="line">hahaha(a=1)</div></pre></td></tr></table></figure></p>
<h3 id="VAR-POSITIONAL-可变参数"><a href="#VAR-POSITIONAL-可变参数" class="headerlink" title="VAR_POSITIONAL 可变参数"></a>VAR_POSITIONAL 可变参数</h3><p>第二种参数是可变参数<code>VAR_POSTIONAL</code>,其特点是有一个<code>*</code>作为前缀声明，例如<code>*xxx</code>，即说明此参数是可变参数。</p>
<p>也如名字所见，<code>VAR_POSTIONAL</code>类型参数仅可通过<strong>位置</strong><code>POSTIONAL</code>传参调用，可以接收任意个位置参数甚至是零个，不可以通过<strong>关键字</strong><code>KEYWORD</code>传参调用。</p>
<ul>
<li><code>VAR_POSITIONAL</code> 可变参数的一些特点<ul>
<li>在函数内部，<code>VAR_POSITIONAL</code>可变参数以一个元组显示。</li>
<li><code>VAR_POSITIONAL</code>可变参数可以不传入任何参数调用也不会报错。</li>
<li><code>VAR_POSITIONAL</code>可变参数只允许存在一个<br>例子：<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; def hahaha(*a):</div><div class="line">...     return a</div><div class="line">...</div><div class="line">#不传入参数也不会报错，会返回一个空元组</div><div class="line">&gt;&gt;&gt; hahaha()</div><div class="line">()</div><div class="line">#也可以传入任意个位置参数调用</div><div class="line">&gt;&gt;&gt; hahaha(3,2,4,5)</div><div class="line">(3, 2, 4, 5)</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h3 id="KEYWORK-ONLY-关键字参数"><a href="#KEYWORK-ONLY-关键字参数" class="headerlink" title="KEYWORK_ONLY 关键字参数"></a>KEYWORK_ONLY 关键字参数</h3><p>第三种参数是关键字参数<code>KEYWORK_ONLY</code>，其特点是，只会在<code>VAR_POSITIONAL</code>可变类型参数的后面，且不带<code>**</code>前缀。</p>
<p>也如名字所见，<code>KEYWORK_ONLY</code>类型参数仅可以通过<strong>关键字</strong><code>KEYWORD</code>传参调用，不可以通过<strong>位置</strong><code>POSTIONAL</code>传参调用。<em>（因为通过位置传的参数已经全部让前面的<code>VAR_POSITONAL</code>参数接收了，所以<code>KEYWORK_ONLY</code>只能通过关键字接受参数调用。）</em></p>
<p>例子：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"># VAR_POSITIONAL不需要使用时，可以匿名化</div><div class="line">def hahaha(*, a):</div><div class="line">    pass</div><div class="line"></div><div class="line"># 只能关键字传参调用</div><div class="line">hahaha(a=1)</div></pre></td></tr></table></figure></p>
<p>###VAR_KEYWORD 可变的关键词参数</p>
<p>第四种参数是可变的关键词参数，其特点是，其特点是有一个<code>**</code>作为前缀声明，例如<code>**xxx</code>，即说明此参数是可变的关键词参数。</p>
<p><code>VAR_KEYWORD</code>类型参数仅可通过<strong>关键字</strong><code>KEYWORD</code>传参调用，可以接收任意个位置参数甚至是零个，不通过<strong>位置</strong><code>POSTIONAL</code>传参调用。</p>
<ul>
<li><code>VAR_KEYWORD</code>可变的关键词参数的一些特点<ul>
<li><code>VAR_KEYWORD</code>在函数内部以一个字典<code>dict</code>显示。</li>
<li><code>VAR_KEYWORD</code>只允许有一个。</li>
<li><code>VAR_KEYWORD</code>只允许在函数的最后声明。</li>
</ul>
</li>
</ul>
<p>例子：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; def hahaha(**a):</div><div class="line">...     return a</div><div class="line">...</div><div class="line">&gt;&gt;&gt; hahaha(a=3,b=111,v=&quot;asasad&quot;)</div><div class="line">&#123;&apos;v&apos;: &apos;asasad&apos;, &apos;a&apos;: 3, &apos;b&apos;: 111&#125;</div></pre></td></tr></table></figure></p>
<h3 id="POSITIONAL-ONLY-位置参数"><a href="#POSITIONAL-ONLY-位置参数" class="headerlink" title="POSITIONAL_ONLY 位置参数"></a>POSITIONAL_ONLY 位置参数</h3><p>第五种是位置参数，它一点也不重要，属于python的历史产物，我们已经无法在高版本python中创建一个<code>POSITIONAL_ONLY</code>参数了已经。</p>
<h3 id="几种参数的综合比较"><a href="#几种参数的综合比较" class="headerlink" title="几种参数的综合比较"></a>几种参数的综合比较</h3><table>
<thead>
<tr>
<th>参数名</th>
<th>英文名</th>
<th>定义时顺序</th>
<th>表达方式</th>
<th>如何调用</th>
</tr>
</thead>
<tbody>
<tr>
<td>位置和关键词参数</td>
<td><code>POSITIONAL_OR_KEYWORD</code></td>
<td>1</td>
<td>正常表达</td>
<td>关键词&amp;位置</td>
</tr>
<tr>
<td>可变参数</td>
<td><code>VAR_POSITIONAL</code></td>
<td>2</td>
<td>前缀<code>*</code></td>
<td>位置</td>
<td></td>
</tr>
<tr>
<td>关键词参数</td>
<td><code>KEYWORD_ONLY</code></td>
<td>3</td>
<td>只能在可变参数后面，不带<code>**</code></td>
<td>关键词</td>
</tr>
<tr>
<td>可变的关键词参数</td>
<td><code>VAR_KEYWORD</code></td>
<td>4</td>
<td>前缀<code>**</code></td>
<td>关键词</td>
</tr>
</tbody>
</table>
<h2 id="默认参数"><a href="#默认参数" class="headerlink" title="默认参数"></a>默认参数</h2><ul>
<li><code>VAR</code>系列的两个参数<em>（可变参数、可变的关键词参数）</em>不允许设置默认参数，而另外两个参数<em>（位置和关键词参数、关键词参数）</em>可以设置默认参数。<ul>
<li>因为<code>VAR_POSITIONAL</code>的默认参数是<code>tuple()</code>空元祖，而<code>VAR_KEYWORD</code>的默认参数是<code>dict()</code>空字典。</li>
</ul>
</li>
<li>默认参数的位置<ul>
<li><code>POSITIONAL_OR_KEYWORD</code>类型的默认参数一定要放在后面，否则会报错。</li>
<li><code>KEYWORD_ONLY</code>虽然没有强制要求，因为都是用关键字传参，谁先谁后都无所谓，但最好还是尽可能地放在后面吧。</li>
</ul>
</li>
<li>默认参数绝对不可以设置为可变类型（比如dict、list、set）。<ul>
<li>因为如果你把默认参数设置为可变类型，下次再调用它就不是默认值了。</li>
</ul>
</li>
</ul>
<p>##接受参数的优先级</p>
<ol>
<li>先接收<code>POSITIONAL_OR_KEYWORD</code></li>
<li>再接收<code>KEYWORD_ONLY</code></li>
<li>再接收<code>VAR_POSITIONAL</code>和<code>VAR_KEYWORD</code>，这两者没有交集</li>
</ol>
<p>例子：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; hahaha(a=3,b=111,v=&quot;asasad&quot;)</div><div class="line">&#123;&apos;v&apos;: &apos;asasad&apos;, &apos;a&apos;: 3, &apos;b&apos;: 111&#125;</div><div class="line">&gt;&gt;&gt; def hahaha(a,*b,c,**d):</div><div class="line">...     print(a)</div><div class="line">...     print(b)</div><div class="line">...     print(c)</div><div class="line">...     print(d)</div><div class="line">...</div><div class="line">&gt;&gt;&gt; hahaha(1,2,&quot;3&quot;,c=4,one=5,two=6)</div><div class="line">1                          #a的值</div><div class="line">(2, &apos;3&apos;)                   #b的值</div><div class="line">4                          #c的值</div><div class="line">&#123;&apos;one&apos;: 5, &apos;two&apos;: 6&#125;       #d的值</div></pre></td></tr></table></figure></p>
<p>##参数组合<br>在python中，这几种参数都可以组合使用，但请一定要注意<strong>参数的顺序</strong></p>
<p>例子：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">def f1(a, b, c=0, *args, **kw):</div><div class="line">    print(&apos;a =&apos;, a, &apos;b =&apos;, b, &apos;c =&apos;, c, &apos;args =&apos;, args, &apos;kw =&apos;, kw)</div><div class="line"></div><div class="line">def f2(a, b, c=0, *, d, **kw):</div><div class="line">    print(&apos;a =&apos;, a, &apos;b =&apos;, b, &apos;c =&apos;, c, &apos;d =&apos;, d, &apos;kw =&apos;, kw)</div><div class="line"></div><div class="line">#在函数调用的时候，Python解释器自动按照参数位置和参数名把对应的参数传进去。</div><div class="line"></div><div class="line">&gt;&gt;&gt; f1(1, 2)</div><div class="line">a = 1 b = 2 c = 0 args = () kw = &#123;&#125;</div><div class="line">&gt;&gt;&gt; f1(1, 2, c=3)</div><div class="line">a = 1 b = 2 c = 3 args = () kw = &#123;&#125;</div><div class="line">&gt;&gt;&gt; f1(1, 2, 3, &apos;a&apos;, &apos;b&apos;)</div><div class="line">a = 1 b = 2 c = 3 args = (&apos;a&apos;, &apos;b&apos;) kw = &#123;&#125;</div><div class="line">&gt;&gt;&gt; f1(1, 2, 3, &apos;a&apos;, &apos;b&apos;, x=99)</div><div class="line">a = 1 b = 2 c = 3 args = (&apos;a&apos;, &apos;b&apos;) kw = &#123;&apos;x&apos;: 99&#125;</div><div class="line">&gt;&gt;&gt; f2(1, 2, d=99, ext=None)</div><div class="line">a = 1 b = 2 c = 0 d = 99 kw = &#123;&apos;ext&apos;: None&#125;</div><div class="line"></div><div class="line">#通过一个tuple和dict，你也可以调用上述函数。</div><div class="line"></div><div class="line">&gt;&gt;&gt; args = (1, 2, 3, 4)</div><div class="line">&gt;&gt;&gt; kw = &#123;&apos;d&apos;: 99, &apos;x&apos;: &apos;#&apos;&#125;</div><div class="line">&gt;&gt;&gt; f1(*args, **kw)</div><div class="line">a = 1 b = 2 c = 3 args = (4,) kw = &#123;&apos;d&apos;: 99, &apos;x&apos;: &apos;#&apos;&#125;</div><div class="line">&gt;&gt;&gt; args = (1, 2, 3)</div><div class="line">&gt;&gt;&gt; kw = &#123;&apos;d&apos;: 88, &apos;x&apos;: &apos;#&apos;&#125;</div><div class="line">&gt;&gt;&gt; f2(*args, **kw)</div><div class="line">a = 1 b = 2 c = 3 d = 88 kw = &#123;&apos;x&apos;: &apos;#&apos;&#125;</div></pre></td></tr></table></figure></p>
<p>所以，对于任意函数，都可以通过类似<code>func(*args, **kw)</code>的形式调用它，无论它的参数是如何定义的。</p>
<p>###小结及注意事项</p>
<ul>
<li>默认参数一定要用不可变对象，如果是可变对象，程序运行时会有逻辑错误！</li>
<li><code>*args</code>是可变参数，args接收的是一个tuple。</li>
<li><code>**kw</code>是可变的关键字参数，kw接收的是一个dict。</li>
<li>可变参数既可以直接传入：<code>func(1, 2, 3)</code>，又可以先组装list或tuple，再通过<code>*args</code>传入：<code>func(*(1, 2, 3))</code></li>
<li>可变的关键字参数既可以直接传入：<code>func(a=1, b=2)</code>，又可以先组装dict，再通过<code>**kw</code>传入：<code>func(**{&#39;a&#39;: 1, &#39;b&#39;: 2})</code>。</li>
<li>使用`<em>args和*</em>kw是Python的习惯写法，当然也可以用其他参数名，但最好使用习惯用法。</li>
<li>关键字参数在没有可变参数的情况下不要忘了写分隔符*，否则定义的将是位置和关键词参数。</li>
</ul>
<p>###参考文献<br>1.<a href="http://www.qiangtaoli.com/bootstrap/blog/001474192642421efbf41449b2e4a3b99e8202c54d2d8a2000" target="_blank" rel="external">python的类型（www.qiangtaoli.com）</a><br>1.<a href="http://www.liaoxuefeng.com/wiki/0014316089557264a6b348958f449949df42a6d3a2e542c000/001431752945034eb82ac80a3e64b9bb4929b16eeed1eb9000#0" target="_blank" rel="external">函数的参数 - 廖雪峰的官方网站</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://reedsun.top/2017/05/24/python/python函数中的参数/" data-id="cj35wmt9y000mg8u1xlpuityr" class="article-share-link">Delen</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-python/python中的格式化字符" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/05/24/python/python中的格式化字符/" class="article-date">
  <time datetime="2017-05-24T14:01:50.590Z" itemprop="datePublished">2017-05-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>#python中的格式化字符<br>在python中我们会遇到一个问题，问题是如何输出格式化的字符串。我们经常会输出类似<code>&#39;亲爱的xxx你好！你xx月的话费是xx，余额是xx&#39;</code>之类的字符串，而xxx的内容都是根据变量变化的，所以，需要一种简便的格式化字符串的方式。<br>在python中，我们用<code>%</code>实现格式化字符串。</p>
<p>##语法<br>我们举个例子来说明格式化字符串的语法<br>‘’’<br>>&gt;&gt; ‘Hello, %s’ % ‘world’<br>‘Hello, world’<br>>&gt;&gt; ‘Hi, %s, you have $%d.’ % (‘Michael’, 1000000)<br>‘Hi, Michael, you have $1000000.’<br>‘’’<br>在字符串内部，<code>%s</code>表示用字符串替换，<code>%d</code>表示用整数替换，有几个<code>%</code>占位符，后面就跟几个变量或者值，顺序要对应好。如果只有一个<code>%</code>，括号可以省略。</p>
<p>##字符串格式化符号</p>
<pre><code>%c     格式化字符及其ASCII码
%s     格式化字符串
%d     格式化整数
%u     格式化无符号整型
%o     格式化无符号八进制数
%x     格式化无符号十六进制数
%X     格式化无符号十六进制数（大写）
%f     格式化浮点数字，可指定小数点后的精度
%e     用科学计数法格式化浮点数
%E     作用同%e，用科学计数法格式化浮点数
%g     %f和%e的简写
%G     %f 和 %E 的简写
%p     用十六进制数格式化变量的地址
</code></pre><p>##格式化操作符辅助指令</p>
<pre><code>符号    功能
*      定义宽度或者小数点精度
-      用做左对齐
+      在正数前面显示加号( + )
&lt;sp&gt;  在正数前面显示空格
\#      在八进制数前面显示零(&apos;0&apos;)，在十六进制前面显示&apos;0x&apos;或者&apos;0X&apos;(取决于用的是&apos;x&apos;还是&apos;X&apos;)
0      显示的数字前面填充`0`而不是默认的空格
%      &apos;%%&apos;输出一个单一的&apos;%&apos;
(var) 映射变量(字典参数)
m.n.  m是显示的最小总宽度,n是小数点后的位数(如果可用的话)
</code></pre><h4 id="指定是否补0和整数与小数的位数的几种情况"><a href="#指定是否补0和整数与小数的位数的几种情况" class="headerlink" title="指定是否补0和整数与小数的位数的几种情况"></a><strong>指定是否补0和整数与小数的位数的几种情况</strong></h4><ul>
<li><code>%0xd</code>表示将整数用<code>0</code>补足到x位<ul>
<li>整数的位数比x小时，用<code>0</code>补足<br>eg:</li>
</ul>
</li>
</ul>
<pre><code>&gt;&gt;&gt; &quot;%03d&quot; %33
&apos;033&apos;
</code></pre><ul>
<li>整数的位数比x大时，直接输出<br>eg：</li>
</ul>
<pre><code>&gt;&gt;&gt; &quot;%03d&quot; %12345
&apos;12345&apos;
</code></pre><ul>
<li><code>%xd</code>表示将整数用<code>空格</code>补足到x位<ul>
<li>如果整数的位数比x小时，用<code>空格</code>补足<br>eg:</li>
</ul>
</li>
</ul>
<pre><code>\&gt;&gt;&gt; &quot;%6d&quot; %123
&apos;   123&apos;
</code></pre><ul>
<li>如果整数的位数比x大时，直接输出<br>eg:</li>
</ul>
<pre><code>\&gt;&gt;&gt; &quot;%3d&quot; %12345
&apos;12345&apos;
</code></pre><ul>
<li><code>%.xf</code>表示将小数中小数点后面的位数固定到x位<ul>
<li>如果小数的位数比x大，则保留x位小数<br>eg:</li>
</ul>
</li>
</ul>
<pre><code>\&gt;&gt;&gt; &quot;%.3f&quot; % 3.1415926
&apos;3.142&apos;
</code></pre><ul>
<li>如果小数的位数比x小，则用0补足<br>eg:</li>
</ul>
<pre><code>\&gt;&gt;&gt; &quot;%.4f&quot; % 3.1
&apos;3.1000&apos;
</code></pre><p>*如果我们不太确定用什么，那么用<code>%s</code>是最保险的，它会把任何数据类型转换为字符串。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://reedsun.top/2017/05/24/python/python中的格式化字符/" data-id="cj35wmt9w000lg8u1i75pgwon" class="article-share-link">Delen</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-python/python中的enumerate语句" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/05/24/python/python中的enumerate语句/" class="article-date">
  <time datetime="2017-05-24T14:01:50.550Z" itemprop="datePublished">2017-05-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>#python中的enumerate语句</p>
<p>##enumerate()用法说明</p>
<ul>
<li>enumerate()用于遍历序列中的元素以及他们的下标。</li>
<li>enumerate()是python的内置函数。</li>
<li>enumerate的意思是枚举，列举的意思。</li>
<li>对于一个可迭代的或者可遍历的对象，enumerate将其组成一个索引序列，利用它同时获得索引和值</li>
<li>enumerate多由于for语句中得到计数。<br>##enumerate()的语法和用法</li>
<li>语法<br><code>enumerate（Iterable，start)</code><ul>
<li>语句中的第一个元素<code>Iterable</code>代表我们要进行遍历的序列（列表，字典，元组，……）。</li>
<li>语句中的第二个元素<code>start</code>代表索引的起始值，默认是0。<br>##enumerate()例子<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; L=[1,2,3,4,5]</div><div class="line">&gt;&gt;&gt; list(enumerate(L))</div><div class="line">[(0, 1), (1, 2), (2, 3), (3, 4), (4, 5)]</div><div class="line">&gt;&gt;&gt; list(enumerate(L,4))</div><div class="line">[(4, 1), (5, 2), (6, 3), (7, 4), (8, 5)]</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<p>##参考文献</p>
<ul>
<li><a href="http://blog.csdn.net/churximi/article/details/51648388" target="_blank" rel="external">python enumerate用法总结-竹聿Simon的专栏</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://reedsun.top/2017/05/24/python/python中的enumerate语句/" data-id="cj35wmt9u000kg8u1ecmujzs2" class="article-share-link">Delen</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-python/learningnote_Object oriented Programming" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/05/24/python/learningnote_Object oriented Programming/" class="article-date">
  <time datetime="2017-05-24T14:01:50.540Z" itemprop="datePublished">2017-05-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="learningnote-Object-oriented-Programming"><a href="#learningnote-Object-oriented-Programming" class="headerlink" title="learningnote_Object oriented Programming"></a>learningnote_Object oriented Programming</h1><p><em>Object oriented Programming – 面对对象编程（OOP）</em></p>
<p>Python从设计之初就已经是一门面向对象的语言，正因为如此，在Python中创建一个类和对象是很容易的。</p>
<p>##面向对象技术简介</p>
<ul>
<li><strong>类(Class)</strong>: 用来描述具有相同的属性和方法的对象的集合。它定义了该集合中每个对象所共有的属性和方法。对象是类的实例。</li>
<li><strong>类变量</strong>：类变量在整个实例化的对象中是公用的。类变量定义在类中且在函数体之外。类变量通常不作为实例变量使用。</li>
<li><strong>数据成员</strong>：类变量或者实例变量用于处理类及其实例对象的相关的数据。</li>
<li><strong>方法重写</strong>：如果从父类继承的方法不能满足子类的需求，可以对其进行改写，这个过程叫方法的覆盖（override），也称为方法的重写。</li>
<li><strong>实例变量</strong>：定义在方法中的变量，只作用于当前实例的类。</li>
<li><strong>继承</strong>：即一个<em>派生类（derived class）</em>继承<em>基类（base class）</em>的字段和方法。继承也允许把一个派生类的对象作为一个基类对象对待。例如，有这样一个设计：一个Dog类型的对象派生自Animal类，这是模拟”是一个（is-a）”关系（例图，Dog是一个Animal）。</li>
<li><strong>实例化</strong>：创建一个类的实例，类的具体对象。</li>
<li><strong>方法</strong>：类中定义的函数。</li>
<li><strong>对象</strong>：通过类定义的数据结构实例。对象包括两个数据成员（类变量和实例变量）和方法。<h2 id="创建类"><a href="#创建类" class="headerlink" title="创建类"></a>创建类</h2>使用class语句来创建一个新类，class之后为类的名称并以冒号结尾，如下实例:<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">class ClassName:</div><div class="line">   &apos;类的帮助信息&apos;   #类文档字符串</div><div class="line">   class_suite  #类体</div></pre></td></tr></table></figure>
</li>
</ul>
<p>类的帮助信息可以通过<code>ClassName.__doc__</code>查看。<br><code>class_suite</code> 由类成员，方法，数据属性组成。</p>
<h3 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h3><p>以下是一个简单的Python类实例:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">#!/usr/bin/python</div><div class="line"># -*- coding: UTF-8 -*-</div><div class="line"></div><div class="line">class Employee:</div><div class="line">   &apos;所有员工的基类&apos;</div><div class="line">   empCount = 0</div><div class="line"></div><div class="line">   def __init__(self, name, salary):</div><div class="line">      self.name = name</div><div class="line">      self.salary = salary</div><div class="line">      Employee.empCount += 1</div><div class="line">   </div><div class="line">   def displayCount(self):</div><div class="line">     print &quot;Total Employee %d&quot; % Employee.empCount</div><div class="line"></div><div class="line">   def displayEmployee(self):</div><div class="line">      print &quot;Name : &quot;, self.name,  &quot;, Salary: &quot;, self.salary</div></pre></td></tr></table></figure></p>
<ul>
<li><code>empCount</code>变量是一个类变量，它的值将在这个类的所有实例之间共享。你可以在内部类或外部类使用<code>Employee.empCount</code>访问。</li>
<li>第一种方法<code>__init__()</code>方法是一种特殊的方法，被称为类的构造函数或初始化方法，当创建了这个类的实例时就会调用该方法<h2 id="创建实例对象"><a href="#创建实例对象" class="headerlink" title="创建实例对象"></a>创建实例对象</h2>要创建一个类的实例，你可以使用类的名称，并通过<code>__init__</code>方法接受参数。<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&quot;创建 Employee 类的第一个对象&quot;</div><div class="line">emp1 = Employee(&quot;Zara&quot;, 2000)</div><div class="line">&quot;创建 Employee 类的第二个对象&quot;</div><div class="line">emp2 = Employee(&quot;Manni&quot;, 5000)</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="访问属性"><a href="#访问属性" class="headerlink" title="访问属性"></a>访问属性</h2><p>您可以使用点(.)来访问对象的属性。使用如下类的名称访问类变量:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">emp1.displayEmployee()</div><div class="line">emp2.displayEmployee()</div><div class="line">print &quot;Total Employee %d&quot; % Employee.empCount</div></pre></td></tr></table></figure></p>
<p>完整实例：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">#!/usr/bin/python</div><div class="line"># -*- coding: UTF-8 -*-</div><div class="line"></div><div class="line">class Employee:</div><div class="line">   &apos;所有员工的基类&apos;</div><div class="line">   empCount = 0</div><div class="line"></div><div class="line">   def __init__(self, name, salary):</div><div class="line">      self.name = name</div><div class="line">      self.salary = salary</div><div class="line">      Employee.empCount += 1</div><div class="line">   </div><div class="line">   def displayCount(self):</div><div class="line">     print &quot;Total Employee %d&quot; % Employee.empCount</div><div class="line"></div><div class="line">   def displayEmployee(self):</div><div class="line">      print &quot;Name : &quot;, self.name,  &quot;, Salary: &quot;, self.salary</div><div class="line"></div><div class="line">&quot;创建 Employee 类的第一个对象&quot;</div><div class="line">emp1 = Employee(&quot;Zara&quot;, 2000)</div><div class="line">&quot;创建 Employee 类的第二个对象&quot;</div><div class="line">emp2 = Employee(&quot;Manni&quot;, 5000)</div><div class="line">emp1.displayEmployee()</div><div class="line">emp2.displayEmployee()</div><div class="line">print &quot;Total Employee %d&quot; % Employee.empCount</div></pre></td></tr></table></figure></p>
<p>执行以上代码输出结果如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Name :  Zara ,Salary:  2000</div><div class="line">Name :  Manni ,Salary:  5000</div><div class="line">Total Employee 2</div></pre></td></tr></table></figure></p>
<p>你可以添加，删除，修改类的属性，如下所示：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">emp1.age = 7  # 添加一个 &apos;age&apos; 属性</div><div class="line">emp1.age = 8  # 修改 &apos;age&apos; 属性</div><div class="line">del emp1.age  # 删除 &apos;age&apos; 属性</div></pre></td></tr></table></figure></p>
<p>你也可以使用以下函数的方式来访问属性：</p>
<ul>
<li><code>getattr(obj, name[, default])</code> : 访问对象的属性。</li>
<li><code>hasattr(obj,name)</code> : 检查是否存在一个属性。</li>
<li><code>setattr(obj,name,value)</code>:设置一个属性。如果属性不存在，会创建一个新属性。</li>
<li><code>delattr(obj, name)</code> : 删除属性。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">hasattr(emp1, &apos;age&apos;)    # 如果存在 &apos;age&apos; 属性返回 True。</div><div class="line">getattr(emp1, &apos;age&apos;)    # 返回 &apos;age&apos; 属性的值</div><div class="line">setattr(emp1, &apos;age&apos;, 8) # 添加属性 &apos;age&apos; 值为 8</div><div class="line">delattr(empl, &apos;age&apos;)    # 删除属性 &apos;age&apos;</div></pre></td></tr></table></figure>
<h2 id="Python内置类属性"><a href="#Python内置类属性" class="headerlink" title="Python内置类属性"></a>Python内置类属性</h2><ul>
<li><code>__dict__</code> : 类的属性（包含一个字典，由类的数据属性组成）</li>
<li><code>__doc__</code> :类的文档字符串</li>
<li><code>__name__</code>: 类名</li>
<li><code>__module__</code>: 类定义所在的模块（类的全名是’<code>__main__.className</code>‘，如果类位于一个导入模块mymod中，那么<code>className.__module__</code> 等于 mymod）</li>
<li><code>__bases__</code> : 类的所有父类构成元素（包含了一个由所有父类组成的元组）<br>Python内置类属性调用实例如下：<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">#!/usr/bin/python</div><div class="line"># -*- coding: UTF-8 -*-</div><div class="line"></div><div class="line">class Employee:</div><div class="line">   &apos;所有员工的基类&apos;</div><div class="line">   empCount = 0</div><div class="line"></div><div class="line">   def __init__(self, name, salary):</div><div class="line">      self.name = name</div><div class="line">      self.salary = salary</div><div class="line">      Employee.empCount += 1</div><div class="line">   </div><div class="line">   def displayCount(self):</div><div class="line">     print &quot;Total Employee %d&quot; % Employee.empCount</div><div class="line"></div><div class="line">   def displayEmployee(self):</div><div class="line">      print &quot;Name : &quot;, self.name,  &quot;, Salary: &quot;, self.salary</div><div class="line"></div><div class="line">print &quot;Employee.__doc__:&quot;, Employee.__doc__</div><div class="line">print &quot;Employee.__name__:&quot;, Employee.__name__</div><div class="line">print &quot;Employee.__module__:&quot;, Employee.__module__</div><div class="line">print &quot;Employee.__bases__:&quot;, Employee.__bases__</div><div class="line">print &quot;Employee.__dict__:&quot;, Employee.__dict__</div></pre></td></tr></table></figure>
</li>
</ul>
<p>执行以上代码输出结果如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Employee.__doc__: 所有员工的基类</div><div class="line">Employee.__name__: Employee</div><div class="line">Employee.__module__: __main__</div><div class="line">Employee.__bases__: ()</div><div class="line">Employee.__dict__: &#123;&apos;__module__&apos;: &apos;__main__&apos;, &apos;displayCount&apos;: &lt;function displayCount at 0x10a939c80&gt;, &apos;empCount&apos;: 0, &apos;displayEmployee&apos;: &lt;function displayEmployee at 0x10a93caa0&gt;, &apos;__doc__&apos;: &apos;\xe6\x89\x80\xe6\x9c\x89\xe5\x91\x98\xe5\xb7\xa5\xe7\x9a\x84\xe5\x9f\xba\xe7\xb1\xbb&apos;, &apos;__init__&apos;: &lt;function __init__ at 0x10a939578&gt;&#125;</div></pre></td></tr></table></figure></p>
<h2 id="类的继承"><a href="#类的继承" class="headerlink" title="类的继承"></a>类的继承</h2><p>面向对象的编程带来的主要好处之一是代码的重用，实现这种重用的方法之一是通过继承机制。继承完全可以理解成类之间的类型和子类型关系。<br>需要注意的地方：<strong>继承语法</strong> class 派生类名（<strong>基类名</strong>）：//… 基类名写作括号里，基本类是在类定义的时候，在元组之中指明的。<br>在python中继承中的一些特点：</p>
<ul>
<li>1：在继承中基类的构造（<code>__init__</code>()方法）不会被自动调用，它需要在其派生类的构造中亲自专门调用。</li>
<li>2：在调用基类的方法时，需要加上基类的类名前缀，且需要带上self参数变量。区别于在类中调用普通函数时并不需要带上self参数</li>
<li>3：Python总是首先查找对应类型的方法，如果它不能在派生类中找到对应的方法，它才开始到基类中逐个查找。（先在本类中查找调用的方法，找不到才去基类中找）。</li>
</ul>
<p>如果在继承元组中列了一个以上的类，那么它就被称作”多重继承” 。<br>语法：<br>派生类的声明，与他们的父类类似，继承的基类列表跟在类名之后，如下所示：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">class SubClassName (ParentClass1[, ParentClass2, ...]):</div><div class="line">   &apos;Optional class documentation string&apos;</div><div class="line">   class_suite</div></pre></td></tr></table></figure></p>
<p>实例：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">#!/usr/bin/python</div><div class="line"># -*- coding: UTF-8 -*-</div><div class="line"></div><div class="line">class Parent:        # 定义父类</div><div class="line">   parentAttr = 100</div><div class="line">   def __init__(self):</div><div class="line">      print &quot;调用父类构造函数&quot;</div><div class="line"></div><div class="line">   def parentMethod(self):</div><div class="line">      print &apos;调用父类方法&apos;</div><div class="line"></div><div class="line">   def setAttr(self, attr):</div><div class="line">      Parent.parentAttr = attr</div><div class="line"></div><div class="line">   def getAttr(self):</div><div class="line">      print &quot;父类属性 :&quot;, Parent.parentAttr</div><div class="line"></div><div class="line">class Child(Parent): # 定义子类</div><div class="line">   def __init__(self):</div><div class="line">      print &quot;调用子类构造方法&quot;</div><div class="line"></div><div class="line">   def childMethod(self):</div><div class="line">      print &apos;调用子类方法 child method&apos;</div><div class="line"></div><div class="line">c = Child()          # 实例化子类</div><div class="line">c.childMethod()      # 调用子类的方法</div><div class="line">c.parentMethod()     # 调用父类方法</div><div class="line">c.setAttr(200)       # 再次调用父类的方法</div><div class="line">c.getAttr()          # 再次调用父类的方法</div></pre></td></tr></table></figure></p>
<p>以上代码执行结果如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">调用子类构造方法</div><div class="line">调用子类方法 child method</div><div class="line">调用父类方法</div><div class="line">父类属性 : 200</div></pre></td></tr></table></figure></p>
<p>你可以继承多个类<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">class A:        # 定义类 A</div><div class="line">.....</div><div class="line"></div><div class="line">class B:         # 定义类 B</div><div class="line">.....</div><div class="line"></div><div class="line">class C(A, B):   # 继承类 A 和 B</div><div class="line">.....</div></pre></td></tr></table></figure></p>
<p>你可以使用issubclass()或者isinstance()方法来检测。</p>
<ul>
<li>issubclass() - <strong>布尔函数</strong>判断一个类是另一个类的子类或者子孙类，语法：issubclass(sub,sup)</li>
<li>isinstance(obj, Class) 布尔函数如果obj是Class类的实例对象或者是一个Class子类的实例对象则返回true。<h2 id="方法重写"><a href="#方法重写" class="headerlink" title="方法重写"></a>方法重写</h2>如果你的父类方法的功能不能满足你的需求，你可以在子类重写你父类的方法：<br>实例：<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">#!/usr/bin/python</div><div class="line"># -*- coding: UTF-8 -*-</div><div class="line"></div><div class="line">class Parent:        # 定义父类</div><div class="line">   def myMethod(self):</div><div class="line">      print &apos;调用父类方法&apos;</div><div class="line"></div><div class="line">class Child(Parent): # 定义子类</div><div class="line">   def myMethod(self):</div><div class="line">      print &apos;调用子类方法&apos;</div><div class="line"></div><div class="line">c = Child()          # 子类实例</div><div class="line">c.myMethod()         # 子类调用重写方法</div></pre></td></tr></table></figure>
</li>
</ul>
<p>执行以上代码输出结果如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">调用子类方法</div></pre></td></tr></table></figure></p>
<h2 id="基础重载方法"><a href="#基础重载方法" class="headerlink" title="基础重载方法"></a>基础重载方法</h2><p>下表列出了一些通用的功能，你可以在自己的类重写：<br>|序号|方法|描述|简单的调用|<br>| :–: | :–: | :–: | :–: |<br>|1|<code>__init__ ( self [,args...] )</code>|构造函数|<code>obj = className(args)</code>|<br>|2|<code>__del__( self )</code>|析构方法, 删除一个对象|<code>dell obj</code>|<br>|3|<code>__repr__( self )</code>|转化为供解释器读取的形式|<code>repr(obj)</code>|<br>|4|<code>__str__( self )</code>|用于将值转化为适于人阅读的形式|<code>str(obj)</code>|<br>|5|<code>__cmp__ ( self, x )</code>|对象比较|<code>cmp(obj, x)</code>|</p>
<p>##运算符重载<br>Python同样支持运算符重载，实例如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">#!/usr/bin/python</div><div class="line"></div><div class="line">class Vector:</div><div class="line">   def __init__(self, a, b):</div><div class="line">      self.a = a</div><div class="line">      self.b = b</div><div class="line"></div><div class="line">   def __str__(self):</div><div class="line">      return &apos;Vector (%d, %d)&apos; % (self.a, self.b)</div><div class="line">   </div><div class="line">   def __add__(self,other):</div><div class="line">      return Vector(self.a + other.a, self.b + other.b)</div><div class="line"></div><div class="line">v1 = Vector(2,10)</div><div class="line">v2 = Vector(5,-2)</div><div class="line">print v1 + v2</div></pre></td></tr></table></figure></p>
<p>以上代码执行结果如下所示:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Vector(7,8)</div></pre></td></tr></table></figure></p>
<p>##类属性与方法</p>
<h3 id="类的私有属性"><a href="#类的私有属性" class="headerlink" title="类的私有属性"></a>类的私有属性</h3><p><code>__private_attrs</code>：两个下划线开头，声明该属性为私有，不能在类地外部被使用或直接访问。在类内部的方法中使用时 <code>self.__private_attrs</code>。</p>
<h3 id="类的方法"><a href="#类的方法" class="headerlink" title="类的方法"></a>类的方法</h3><p>在类地内部，使用def关键字可以为类定义一个方法，与一般函数定义不同，类方法必须包含参数self,且为第一个参数</p>
<h3 id="类的私有方法"><a href="#类的私有方法" class="headerlink" title="类的私有方法"></a>类的私有方法</h3><p><code>__private_method</code>：两个下划线开头，声明该方法为私有方法，不能在类地外部调用。在类的内部调用 <code>self.__private_methods</code></p>
<h3 id="实例-1"><a href="#实例-1" class="headerlink" title="实例"></a>实例</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">#!/usr/bin/python</div><div class="line"># -*- coding: UTF-8 -*-</div><div class="line"></div><div class="line">class JustCounter:</div><div class="line">	__secretCount = 0  # 私有变量</div><div class="line">	publicCount = 0    # 公开变量</div><div class="line"></div><div class="line">	def count(self):</div><div class="line">		self.__secretCount += 1</div><div class="line">		self.publicCount += 1</div><div class="line">		print self.__secretCount</div><div class="line"></div><div class="line">counter = JustCounter()</div><div class="line">counter.count()</div><div class="line">counter.count()</div><div class="line">print counter.publicCount</div><div class="line">print counter.__secretCount  # 报错，实例不能访问私有变量</div></pre></td></tr></table></figure>
<p>Python 通过改变名称来包含类名:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">1</div><div class="line">2</div><div class="line">2</div><div class="line">Traceback (most recent call last):</div><div class="line">  File &quot;test.py&quot;, line 17, in &lt;module&gt;</div><div class="line">    print counter.__secretCount  # 报错，实例不能访问私有变量</div><div class="line">AttributeError: JustCounter instance has no attribute &apos;__secretCount&apos;</div></pre></td></tr></table></figure></p>
<p>Python不允许实例化的类访问私有数据，但你可以使用 <code>object._className__attrName</code> 访问属性，将如下代码替换以上代码的最后一行代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">.........................</div><div class="line">print counter._JustCounter__secretCount</div></pre></td></tr></table></figure></p>
<p>执行以上代码，执行结果如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">1</div><div class="line">2</div><div class="line">2</div><div class="line">2</div></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://reedsun.top/2017/05/24/python/learningnote_Object oriented Programming/" data-id="cj35wmt9p000ig8u1bc6hhbhd" class="article-share-link">Delen</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-python/Python的自带模块——HTMLParser的初步学习" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/05/24/python/Python的自带模块——HTMLParser的初步学习/" class="article-date">
  <time datetime="2017-05-24T14:01:50.530Z" itemprop="datePublished">2017-05-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Python的自带模块——HTMLParser的初步学习"><a href="#Python的自带模块——HTMLParser的初步学习" class="headerlink" title="Python的自带模块——HTMLParser的初步学习"></a>Python的自带模块——HTMLParser的初步学习</h1><ul>
<li>HTMLParser是Python自带的模块，使用简单，能够很容易的实现HTML文件的分析。</li>
<li><p>本文主要简单讲一下HTMLParser的用法. </p>
</li>
<li><p>使用时需要定义一个<strong>从模块<code>html.parser</code>中的类<code>HTMLParser</code>继承的</strong>类，重定义函数：</p>
<ul>
<li><code>handle_starttag( tag, attrs)</code></li>
<li><code>handle_startendtag( tag, attrs)</code></li>
<li><code>handle_endtag( tag)</code></li>
<li><code>handle_data(data)</code></li>
</ul>
</li>
</ul>
<p>##1. 获取标签属性</p>
<ul>
<li><code>tag</code>是的html标签，<code>attrs</code>是 (属性，值)元组(<code>tuple</code>)的列表(<code>list</code>). </li>
</ul>
<p>如一个标签为：</p>
<blockquote>
<p><code>&lt;input type=&quot;hidden&quot; name=&quot;NXX&quot; id=&quot;IDXX&quot; value=&quot;VXX&quot; /&gt;</code></p>
</blockquote>
<p>那么它的<code>attrs</code>列表为</p>
<blockquote>
<p>`[(‘type’, ‘hidden’), (‘name’, ‘NXX’), (‘id’, ‘IDXX’), (‘value’, ‘VXX’)]</p>
</blockquote>
<ul>
<li><code>HTMLParser</code>自动将<code>tag</code>和<code>attrs</code>都转为小写。</li>
</ul>
<p>##2. 获取标签内容</p>
<ul>
<li>解析时碰到<code>&lt;***&gt;</code>，自动调用<code>handle_starttag()</code>；碰到<code>&lt;/***&gt;</code>，自动调用<code>handle_endtag()</code></li>
<li><p>每一个标签，无论<code>&lt;&gt;</code> 还是<code>&lt;/&gt;</code>，均会调用<code>handle_data()</code></p>
</li>
<li><p>html中第一行、第二行分别为<code>&lt;html&gt;</code>和<code>&lt;head&gt;</code>，后面无具体数据，只有回车换行，所用调用<code>handle_data()</code>，打印结果为换行；<code>&lt;/html&gt;&lt;/head&gt;</code>同理。</p>
</li>
</ul>
<p>##3. 一个简单的例子</p>
<ul>
<li>获取豆瓣上正在上映影片的基本信息<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line"># encoding=utf8</div><div class="line">import requests</div><div class="line">from html.parser import HTMLParser</div><div class="line">from html.entities import name2codepoint</div><div class="line"></div><div class="line"></div><div class="line">class Myparser(HTMLParser):</div><div class="line">    def __init__(self):</div><div class="line">        HTMLParser.__init__(self)</div><div class="line">        self.movies = []</div><div class="line"></div><div class="line">    def handle_starttag(self, tag, attrs):</div><div class="line">        def _attr(attrlist, attrname):</div><div class="line">            for each in attrlist:</div><div class="line">                if attrname == each[0]:</div><div class="line">                    return each[1]</div><div class="line">            return None</div><div class="line"></div><div class="line">        if tag == &apos;li&apos; and _attr(attrs, &apos;data-title&apos;):</div><div class="line">            movie = &#123;&#125;</div><div class="line">            movie[&apos;actors&apos;] = _attr(attrs, &apos;data-actors&apos;)</div><div class="line">            movie[&apos;director&apos;] = _attr(attrs, &apos;data-director&apos;)</div><div class="line">            movie[&apos;duration&apos;] = _attr(attrs, &apos;data-dutation&apos;)</div><div class="line">            movie[&apos;title&apos;] = _attr(attrs, &apos;data-title&apos;)</div><div class="line">            movie[&apos;rate&apos;] = _attr(attrs, &apos;data-rate&apos;)</div><div class="line">            self.movies.append(movie)</div><div class="line"></div><div class="line"></div><div class="line">def movieparser(url):</div><div class="line">    headers = &#123;&#125;</div><div class="line">    req = requests.get(url)</div><div class="line">    s = req.text</div><div class="line">    myparser = Myparser()</div><div class="line">    myparser.feed(s)</div><div class="line">    myparser.close()</div><div class="line">    return myparser.movies</div><div class="line"></div><div class="line"></div><div class="line">if __name__ == &apos;__main__&apos;:</div><div class="line">    url = &apos;https://movie.douban.com/&apos;</div><div class="line">    movies = movieparser(url)</div><div class="line">    for each in movies:</div><div class="line">        print(&apos;%(title)s|%(rate)s|%(actors)s|%(director)s|%(duration)s&apos; % each)</div></pre></td></tr></table></figure>
</li>
</ul>
<p>运行结果:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">湄公河行动|8.2|张涵予 / 彭于晏 / 孙淳|林超贤|None</div><div class="line">圆梦巨人 The BFG|6.7|鲁比·巴恩希尔 / 马克·里朗斯 / 比尔·哈德尔|史蒂文·斯皮尔伯格|None</div><div class="line">从你的全世界路过|5.5|邓超 / 白百何 / 杨洋|张一白|None</div><div class="line">暗杀游戏 Мафия: Игра на выживание|4.3|瓦蒂姆·提萨拉提 / 维奥莱塔·吉特孟斯塔雅 / 韦尼亚明·斯梅霍夫|萨里·奥德赛耶|None</div><div class="line">鲁滨逊漂流记 Robinson Crusoe|5.5|马提亚斯·施维赫夫 / 卡亚·叶娜尔 / 伊尔卡·贝桑|文森特·凯斯特鲁特|None</div><div class="line">勇士|4.7|李东学 / 于小伟 / 聂远|宁海强|None</div><div class="line">黑处有什么|6.8|苏晓彤 / 郭笑 / 陆琦蔚|王一淳|None</div><div class="line">王牌逗王牌|3.6|刘德华 / 黄晓明 / 王祖蓝|王晶|None</div><div class="line">爵迹|3.7|范冰冰 / 吴亦凡 / 陈学冬|郭敬明|None</div><div class="line">铠甲勇士捕王|4.1|赖艺 / 王畅唱 / 曲澔濬|郑国伟|None</div><div class="line">逗鸟外传：萌宝满天飞 Storks|7.7|安迪·萨姆伯格 / 凯蒂·克朗 / 凯尔希·格兰莫|尼古拉斯·斯托勒|None</div><div class="line">宾虚 Ben-Hur|5.8|杰克·休斯顿 / 纳赞宁·波妮阿蒂 / 摩根·弗里曼|提莫·贝克曼贝托夫|None</div><div class="line">幽灵医院|2.4|白歆惠 / 李昌熙 / 罗家英|殷国君|None</div><div class="line">T台魔王||朱研 / 班嘉佳 / 侯静文|牛辉|None</div><div class="line">我是哪吒|4.9|陶典 / 韩娇娇 / 刘垚|舒展|None</div><div class="line">神兽金刚之青龙再现|5.5|黄健 / 李仲鑫 / 谢安晟|朱晓兵|None</div><div class="line">疯狂丑小鸭|2.8|苏倩芸 / 王雪沁 / 杨进|蒋叶峰|None</div><div class="line">樱桃小丸子：来自意大利的少年 ちびまる子ちゃん イタリアから来た少年|7.1|鳕子 / 屋良有作 / 一龙斋贞友|高木淳|None</div><div class="line">新东方神娃||王燕华 / 王晓彤 / 李晔|殷晓东|None</div><div class="line">七月与安生|7.6|周冬雨 / 马思纯 / 李程彬|曾国祥|None</div><div class="line">爱上处女座|4.1|萧蔷 / 贺刚 / 高天|刘观伟|None</div><div class="line"></div><div class="line">Process finished with exit code 0</div></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://reedsun.top/2017/05/24/python/Python的自带模块——HTMLParser的初步学习/" data-id="cj35wmt9m000hg8u1j8o7bgbl" class="article-share-link">Delen</a>
      
      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <a class="extend prev" rel="prev" href="/page/4/">&laquo; __('prev')</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/6/">__('next') &raquo;</a>
  </nav>
</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archieven</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recente berichten</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/05/24/webpack/webpack学习笔记 （下）/">(no title)</a>
          </li>
        
          <li>
            <a href="/2017/05/24/webpack/webpack学习笔记 （上）/">(no title)</a>
          </li>
        
          <li>
            <a href="/2017/05/24/vuex/Vuex的五个核心属性/">(no title)</a>
          </li>
        
          <li>
            <a href="/2017/05/24/python/python中的元类Metaclass/python中的元类Metaclass/">(no title)</a>
          </li>
        
          <li>
            <a href="/2017/05/24/python/获取对象信息/">(no title)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 ReedSun<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>